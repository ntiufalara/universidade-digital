<?xml version="1.0" encoding="UTF-8"?>

<openerp>
    <data>
        <!-- WIZARD: ADICIONAR BOLSA -->
        <record id="action_ud_monitoria_bolsa_adicionar_wizard" model="ir.actions.act_window">
            <field name="name">Adicionar Bolsa</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud_monitoria.bolsa_adicionar_wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="ud_monitoria_bolsa_adicionar_wizard_form_view" model="ir.ui.view">
            <field name="name">ud_monitoria.bolsa_adicionar_wizard.form</field>
            <field name="model">ud_monitoria.bolsa_adicionar_wizard</field>
            <field name="groups_id"
                   eval="[(6, 0, [ref('ud_monitoria.group_ud_monitoria_coordenador')]), (6, 0, [ref('ud_monitoria.group_ud_monitoria_administrador')])]"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Adição de bolsa" version="7.0">
                    <field name="discente_id" invisible="1" options="{'no_open': true}"/>
                    <group>
                        <field name="semestre_id" readonly="1" options="{'no_open': true}"/>
                    </group>
                    <div style="color: red;">
                        Serão mostradas apenas as disciplinas com data final não ultrapassada.
                    </div>
                    <group string="Filtros" col="4">
                        <field name="bolsas_curso_id" colspan="2"
                               options="{'create_edit': false, 'create': false, 'no_open': true}"
                               on_change="onchange_curso()"/>
                        <field name="disciplina_id" colspan="2"
                               options="{'create_edit': false, 'create': false, 'no_open': true}"
                               on_change="onchange_disciplina(disciplina_id)"
                               attrs="{'readonly': ['|', ('bolsas_curso_id', '=', False), ('semestre_id', '=', False)]}"/>
                        <field name="tutor" colspan="2" on_change="onchange_limpar_doc_discente()"/>
                        <field name="status" colspan="2" on_change="onchange_limpar_doc_discente()"/>
                    </group>
                    <group string="Dados do(a) orientador(a)" col="4">
                        <field name="perfil_id" colspan="2" readonly="1" options="{'no_open': true}"/>
                        <field name="orientador_id" colspan="2" readonly="1" options="{'no_open': true}"/>
                    </group>
                    <group string="Dados do(a) discente" col="4">
                        <field name="bolsas" colspan="2" readonly="1"/>
                        <field name="valor_bolsa" colspan="2"/>
                        <field name="doc_discente_id" colspan="4" options="{'create_edit': false, 'create': false}"
                               on_change="onchange_doc_discente(doc_discente_id)"
                               attrs="{'readonly': ['|', '|', ('bolsas_curso_id', '=', False), ('semestre_id', '=', False), ('disciplina_id', '=', False)]}"/>
                    </group>
                    <group string="Dados Bancários" col="4" attrs="{'invisible': [('doc_discente_id', '=', False)]}">
                        <div colspan="4">
                            Se disponível, selecione um registros com os dados bancários do discente.
                        </div>
                        <field name="dados_bancarios_id" colspan="4"
                               attrs="{'readonly': [('doc_discente_id', '=', False)], 'required': [('banco_id', '=', False)]}"
                               context="{'form_view_ref': 'ud.ud_dados_bancarios_usuario_form', 'proprietario_conta': discente_id}"/>
                        <div colspan="4" attrs="{'invisible': [('dados_bancarios_id', '!=', False)]}">
                            Ou adicione novos dados.
                        </div>
                        <field name="banco_id" on_change="onchange_banco(banco_id)" options="{'no_open': true}"
                               attrs="{'invisible': [('dados_bancarios_id', '!=', False)], 'required': [('dados_bancarios_id', '=', False)]}"
                               placeholder="Seleção do Banco" colspan="4"/>
                        <group col="4" attrs="{'invisible': [('banco_id', '==', False)]}" colspan="4">
                            <group col="8" colspan="2">
                                <field name="agencia" colspan="6" placeholder="Nº da agência bancária"
                                       attrs="{'required': [('agencia_v', '==', True)], 'invisible': [('agencia_v', '==', False)]}"/>
                                <field name="dv_agencia" nolabel="1" colspan="2" placeholder="Díg. verif."
                                       attrs="{'required': [('dv_agencia_v', '==', True)], 'invisible': [('dv_agencia_v', '==', False)]}"/>
                            </group>
                            <group col="8" colspan="2">
                                <field name="conta" colspan="6" placeholder="Nº da conta bancária"
                                       attrs="{'required': [('conta_v', '==', True)], 'invisible': [('conta_v', '==', False)]}"/>
                                <field name="dv_conta" nolabel="1" colspan="2" placeholder="Díg. verif."
                                       attrs="{'required': [('dv_conta_v', '==', True)], 'invisible': [('dv_conta_v', '==', False)]}"/>
                            </group>
                            <field name="operacao" colspan="2" placeholder="Nº da Operação"
                                   attrs="{'required': [('operacao_v', '==', True)], 'invisible': [('operacao_v', '==', False)]}"/>
                        </group>
                        <group invisible="1">
                            <field name="agencia_v"/>
                            <field name="dv_agencia_v"/>
                            <field name="conta_v"/>
                            <field name="dv_conta_v"/>
                            <field name="operacao_v"/>
                        </group>
                    </group>
                    <footer>
                        <button name="executar_acao" string="Adicionar" type="object" class="oe_highlight"
                                confirm="Realmente deseja adicionar uma bolsa para o discente atual?"/>
                        ou
                        <button string="Cancelar" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- WIZARD: TRANSFERÊNCIA DE BOLSA -->
        <record id="ud_monitoria_bolsa_transferir_wizard_action" model="ir.actions.act_window">
            <field name="name">Transferência de Bolsa</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud_monitoria.bolsa_transferir_wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="ud_monitoria_bolsa_transferir_wizard_form" model="ir.ui.view">
            <field name="name">ud_monitoria.bolsa_transferir_wizard.form</field>
            <field name="model">ud_monitoria.bolsa_transferir_wizard</field>
            <field name="groups_id"
                   eval="[(6, 0, [ref('ud_monitoria.group_ud_monitoria_coordenador')]), (6, 0, [ref('ud_monitoria.group_ud_monitoria_administrador')])]"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Transferência de Bolsa" version="7.0">
                    <group>
                        <field name="semestre_id" options="{'no_open': true}"/>
                    </group>
                    <group string="Informações Importantes">
                        <ul>
                            <li><strong>Serão mostradas apenas as disciplinas com data final não ultrapassada;</strong></li>
                            <li>Se não houver vaga para novos colaboradores na disciplina de origem, uma nova será adicionada;</li>
                            <li>Dependendo do caso, a bolsa pode ser transferida entre cursos e/ou disciplinas.</li>
                        </ul>
                    </group>
                    <group>
                        <group string="De">
                            <field name="bolsas_curso_id_de" on_change="onchange_curso('de')" options="{'no_open': true, 'create_edit': false}"/>
                            <field name="disciplina_id_de" on_change="onchange_disciplina('de', disciplina_id_de)" options="{'no_open': true, 'create_edit': false}"
                                   attrs="{'readonly': ['|', ('bolsas_curso_id_de', '=', False), ('semestre_id', '=', False)]}"/>
                            <field name="perfil_id_de" options="{'no_open': true}" readonly="1"/>
                            <field name="orientador_id_de" options="{'no_open': true}" readonly="1"/>
                            <field name="tutor_de" on_change="onchange_limpa_discente('de')"/>
                            <field name="doc_discente_id_de" on_change="onchange_discente('de', doc_discente_id_de)" options="{'no_open': true, 'create_edit': false}"
                                   attrs="{'readonly': ['|', '|', ('bolsas_curso_id_de', '=', False), ('semestre_id', '=', False), ('disciplina_id_de', '=', False)]}"/>
                            <field name="valor_bolsa" readonly="1"/>
                        </group>
                        <group string="Para">
                            <field name="bolsas_curso_id_para" on_change="onchange_curso('para')" options="{'no_open': true, 'create_edit': false}"/>
                            <field name="disciplina_id_para" options="{'no_open': true, 'create_edit': false}"
                                   on_change="onchange_disciplina('para', disciplina_id_para)"
                                   attrs="{'readonly': ['|', ('bolsas_curso_id_para', '=', False), ('semestre_id', '=', False)]}"/>
                            <field name="perfil_id_para" options="{'no_open': true}" readonly="1"/>
                            <field name="orientador_id_para" options="{'no_open': true}" readonly="1"/>
                            <field name="tutor_para" on_change="onchange_limpa_discente('para')"/>
                            <field name="status_para" on_change="onchange_limpa_discente('para')"/>
                            <field name="doc_discente_id_para" on_change="onchange_discente('para', doc_discente_id_para)"
                                   options="{'no_open': true, 'create_edit': false}"
                                   attrs="{'readonly': ['|', '|', ('bolsas_curso_id_para', '=', False), ('semestre_id', '=', False), ('disciplina_id_para', '=', False)]}"/>
                            <field name="discente_id" readonly="1" invisible="1"/>
                        </group>
                    </group>
                    <group string="Dados Bancários" col="4">
                        <field name="dados_bancarios_id" colspan="4" attrs="{'required': [('banco_id', '=', False)]}"/>
                        <field name="banco_id" on_change="onchange_banco(banco_id)" colspan="4" options="{'no_open': true}"
                               attrs="{'invisible': [('dados_bancarios_id', '!=', False)], 'required': [('dados_bancarios_id', '=', False)]}"
                               placeholder="Seleção do Banco"/>
                        <group col="4" attrs="{'invisible': [('banco_id', '==', False)]}" colspan="4">
                            <group col="8" colspan="2">
                                <field name="agencia" colspan="6" placeholder="Nº da agência bancária"
                                       attrs="{'required': [('agencia_v', '==', True)], 'invisible': [('agencia_v', '==', False)]}"/>
                                <field name="dv_agencia" nolabel="1" colspan="2" placeholder="Díg. verif."
                                       attrs="{'required': [('dv_agencia_v', '==', True)], 'invisible': [('dv_agencia_v', '==', False)]}"/>
                            </group>
                            <group col="8" colspan="2">
                                <field name="conta" colspan="6" placeholder="Nº da conta bancária"
                                       attrs="{'required': [('conta_v', '==', True)], 'invisible': [('conta_v', '==', False)]}"/>
                                <field name="dv_conta" nolabel="1" colspan="2" placeholder="Díg. verif."
                                       attrs="{'required': [('dv_conta_v', '==', True)], 'invisible': [('dv_conta_v', '==', False)]}"/>
                            </group>
                            <field name="operacao" colspan="2" placeholder="Nº da Operação"
                                   attrs="{'required': [('operacao_v', '==', True)], 'invisible': [('operacao_v', '==', False)]}"/>
                        </group>
                        <group invisible="1">
                            <field name="agencia_v"/>
                            <field name="dv_agencia_v"/>
                            <field name="conta_v"/>
                            <field name="dv_conta_v"/>
                            <field name="operacao_v"/>
                        </group>
                    </group>
                    <footer>
                        <button name="executar_acao" string="Transferir" type="object" class="oe_highlight"
                                confirm="Essa ação retirará a bolsa de um discente para adicionar a outro. Deseja continuar?"/>
                        ou
                        <button string="Cancelar" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- WIZARD: REMOVER BOLSA -->
        <record id="action_ud_monitoria_bolsa_remover_wizard_form_view" model="ir.actions.act_window">
            <field name="name">Remover Bolsa</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ud_monitoria.bolsa_remover_wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="ud_monitoria_bolsa_remover_wizard_form_view" model="ir.ui.view">
            <field name="name">ud_monitoria.bolsa_remover_wizard.form</field>
            <field name="model">ud_monitoria.bolsa_remover_wizard</field>
            <field name="groups_id"
                   eval="[(6, 0, [ref('ud_monitoria.group_ud_monitoria_coordenador')]), (6, 0, [ref('ud_monitoria.group_ud_monitoria_administrador')])]"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Remoção de bolsa" version="7.0">
                    <group>
                        <field name="semestre_id" readonly="1" options="{'no_open': true}"/>
                    </group>
                    <div style="color: red;">
                        Serão mostradas apenas as disciplinas com data final não ultrapassada.
                    </div>
                    <group string="Filtros" col="4">
                        <field name="bolsas_curso_id" colspan="2" on_change="onchange_curso()"
                               options="{'no_open': true, 'create_edit': false, 'create': false}"/>
                        <field name="disciplina_id" colspan="2" on_change="onchange_disciplina(disciplina_id)"
                               options="{'no_open': true, 'create_edit': false, 'create': false}"
                               attrs="{'readonly': ['|', ('bolsas_curso_id', '=', False), ('semestre_id', '=', False)]}"/>
                        <field name="tutor" colspan="2" on_change="onchange_tutor()"/>
                    </group>
                    <group string="Dados do(a) orientador(a)" col="4">
                        <field name="perfil_id" colspan="2" readonly="1" options="{'no_open': true}"/>
                        <field name="orientador_id" colspan="2" readonly="1" options="{'no_open': true}"/>
                    </group>
                    <group string="Dados do(a) discente">
                        <field name="vagas" colspan="2" readonly="1"/>
                        <field name="doc_discente_id" colspan="2" options="{'no_open': true, 'create_edit': false, 'create': false}"
                               attrs="{'readonly': ['|', '|', ('bolsas_curso_id', '=', False), ('semestre_id', '=', False), ('disciplina_id', '=', False)]}"/>
                    </group>
                    <footer>
                        <button name="executar_acao" string="Remover" type="object" class="oe_highlight"
                                confirm="Realmente deseja remover a bolsa do discente atual?"/>
                        ou
                        <button string="Cancelar" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
    </data>
</openerp>