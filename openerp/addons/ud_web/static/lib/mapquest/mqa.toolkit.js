MQKEY=Key='Fmjtd|luu82qubn0,ag=o5-94t00a';
MQCONFIGNUMBER=4;
if(window.MQPROTOCOL===undefined){ MQPROTOCOL=window.location.protocol==='https:'?'https://':'http://'; }
MQPLATFORMSERVER=MQPROTOCOL+"open.mapquestapi.com";
MQSTATICSERVER="http://open.mapquestapi.com/staticmap/";
MQTRAFFSERVER=TRAFFSERVER="";
MQROUTEURL="http://open.mapquestapi.com/directions/";
MQGEOCODEURL="http://open.mapquestapi.com/geocoding/";
MQNOMINATIMURL=MQPROTOCOL+"open.mapquestapi.com/";
MQSEARCHURL="";
MQLONGURL=MQPLATFORMSERVER;
MQSMSURL=MQPLATFORMSERVER;
MQTOOLKIT_VERSION="v7.2.1".replace(/^v/, '');
MQCDN=MQIMAGEPATH="http://api.mqcdn.com/"+"open-sdk/js/v7.2.1/";
MQCDNCOMMON="http://api.mqcdn.com/";
MQICONSERVER=ICONSERVER=MQPROTOCOL+'icons.mqcdn.com';
LOGSERVER=MQTILELOGGER="http://coverage.osm.mapquest.com";
MQLOGURL="http://coverage.osm.mapquest.com/logger/v1";
COVSERVER=MQCOPYRIGHT="http://coverage.osm.mapquest.com";
MAPSERVER="otile1.mqcdn.com,otile2.mqcdn.com,otile3.mqcdn.com,otile4.mqcdn.com".split(",");
MAPSERVER_TILEPATH="/tiles/1.0.0/map";
MQTILEMAP="http://otile{$hostrange}.mqcdn.com/tiles/1.0.0/map/{$z}/{$x}/{$y}.{$ext}";
MQTILEMAPEXT="jpg";
MQTILEMAPHI=4;
MQTILEMAPLO=1;
SATSERVER="otile1.mqcdn.com,otile2.mqcdn.com,otile3.mqcdn.com,otile4.mqcdn.com".split(",");
SATSERVER_TILEPATH="/tiles/1.0.0/sat";
MQTILESAT="http://otile{$hostrange}.mqcdn.com/tiles/1.0.0/sat/{$z}/{$x}/{$y}.{$ext}";
MQTILESATEXT="jpg";
MQTILESATHI=4;
MQTILESATLO=1;
HYBSERVER="otile1.mqcdn.com,otile2.mqcdn.com,otile3.mqcdn.com,otile4.mqcdn.com".split(",");
HYBSERVER_TILEPATH="/tiles/1.0.0/hyb";
MQTILEHYB="http://otile{$hostrange}.mqcdn.com/tiles/1.0.0/hyb/{$z}/{$x}/{$y}.{$ext}";
MQTILEHYBEXT="png";
MQTILEHYBHI=4;
MQTILEHYBLO=1;
function $pv() {};  function $a() {};

/**
 * MapQuest tiled map toolkit.
 * Copyright 2014, MapQuest Inc.  All Rights Reserved.
 * Copying, reverse engineering, or modification is strictly prohibited.
 */
if(!window.Key){Key="GsX"}MQA={MAXZOOM:18,MINZOOM:2,TILESIZE:256,SM_VIEWPORT:400,TN_VIEWPORT:120,SLIDESTEPS:9,SLIDEDELAY:11,RESOURCES:MQCDN+"images/",STATICRESOURCES:MQSTATICSERVER+"/v4/getmap",CORNER_TOPLEFT:0,CORNER_TOPRIGHT:1,CORNER_BOTTOMLEFT:2,CORNER_BOTTOMRIGHT:3,BUTTON_MQ_LEFT:0,BUTTON_MQ_MIDDLE:1,BUTTON_MQ_RIGHT:2,CONTROL_TYPE:3,CONTROL_TRANSIT:6};MQA.MAP_TYPE={MAP:"map",SAT:"sat",HYB:"hyb",NONE:"none"};MQA.TILE_LAYER_ID={MAP:"map_tiles",SAT:"sat_tiles",HYB:"hyb_tiles"};if(MQPROTOCOL==="https://"){if(MQCDN.indexOf("content")>-1){MQCDN=MQCDN.replace("content","api-s")}if(MQICONSERVER.indexOf(".mqcdn.com")>-1&&MQICONSERVER.indexOf("-s.mqcdn.com")===-1){MQICONSERVER=MQICONSERVER.replace(".mqcdn.com","-s.mqcdn.com")}}MQA._jsEval=function(s){return eval(s)};(function(J){var L=function(As){};var n=function(At,As){};J.Log={debug:L,handleError:n};function Z(){}function AP(){return function(){}}function Al(As){var At=function(){var Ax=arguments.callee,Au,Aw,Av;Au=Ax.__before__;if(Au){for(Av=Au.length-1;Av>=0;Av--){Au[Av].apply(this,arguments)}}Aw=As.apply(this,arguments);Au=Ax.__after__;if(Au){for(Av=0;Av<Au.length;Av++){Au[Av].apply(this,arguments)}}return Aw};At.__aopwrapper__=true;return At}function Q(As){var At=As.indexOf("$");if(At>0){return{name:As.substring(0,At),advice:As.substring(At+1).toLowerCase()}}else{return{name:As}}}function AV(Av,Aw,Au,Ax){var As=Ax[Av],At;if(As===undefined){As=Z}if(typeof As!="function"){}if(!Ax.hasOwnProperty(Av)||!As.__aopwrapper__){At=Al(As);Ax[Av]=At}else{At=As}switch(Aw){case"before":if(!At.__before__){At.__before__=[Au]}else{At.__before__.push(Au)}break;case"after":if(!At.__after__){At.__after__=[Au]}else{At.__after__.push(Au)}break}}function AU(At,Au){var Ax,As,Aw,Av;for(Ax in Au){if(!Au.hasOwnProperty(Ax)){continue}Av=Q(Ax);As=Au[Ax];if(!Av.advice){At[Ax]=As}else{AV(Av.name,Av.advice,As,At)}}return At}function o(At,As){var Au;for(Au in As){if(As.hasOwnProperty(Au)){At[Au]=As[Au]}}return At}function q(At,As,Av,Au){AV(As,Av.toLowerCase(),Au,At)}function W(At,Aw,Ay,Au,Av){var Ax,As=[];for(Ax=5;Ax<arguments.length;Ax++){As.push(arguments[Ax])}q(At,Aw,Ay,function(){var Az=As.concat();for(Ax=0;Ax<arguments.length;Ax++){Az.push(arguments[Ax])}return Au[Av].apply(Au,Az)})}J.extend=o;J.mixin=AU;J.attach=q;J.connect=W;var AD,s,Ar;function z(As){return typeof (As)=="function"}function u(As){return typeof (As)=="undefined"}function AG(As){return typeof As!="string"?false:!!As.match(/^\$id\$/)}function M(A3){var Ax=document,Az=Ax.documentElement,A1=Ax.body,A0=window,As,Ay,Av,At,Aw=0,Au=0,A2;if(A3.getBoundingClientRect){A2=A3.getBoundingClientRect();As=Az.clientTop||A1.clientTop||0,Ay=Az.clientLeft||A1.clientLeft||0,Av=(A0.pageYOffset||Az.scrollTop||A1.scrollTop),At=(A0.pageXOffset||Az.scrollLeft||A1.scrollLeft),Aw=A2.top+Av-As,Au=A2.left+At-Ay;return{x:Math.floor(Au),y:Math.floor(Aw)}}do{Aw+=A3.offsetTop||0;Au+=A3.offsetLeft||0;A3=A3.offsetParent}while(A3);return{x:Aw,y:Au}}function h(Av,Ax){var Aw=M(Av),As=0,At=0;if(J.browser.os=="ipad"||J.browser.os=="iphone"||J.browser.os=="android"){var Au=Ax.touches[0];As=Au.pageX;At=Au.pageY}else{if(Ax.pageX||Ax.pageY){As=Ax.pageX;At=Ax.pageY}else{if(Ax.clientX||Ax.clientY){As=Ax.clientX+(document.body.scrollLeft||0)+(document.documentElement.scrollLeft||0);At=Ax.clientY+(document.body.scrollTop||0)+(document.documentElement.scrollTop||0)}}}Aw.x=As-Aw.x;Aw.y=At-Aw.y;return Aw}function Ag(Av){var As=0,At=0;if(J.browser.os=="ipad"||J.browser.os=="iphone"||J.browser.os=="android"){var Au=Av.touches[0];As=Au.pageX;At=Au.pageY}else{if(Av.pageX||Av.pageY){As=Av.pageX;At=Av.pageY}else{if(Av.clientX||Av.clientY){As=Av.clientX+(document.body.scrollLeft||0)+(document.documentElement.scrollLeft||0);At=Av.clientY+(document.body.scrollTop||0)+(document.documentElement.scrollTop||0)}}}return{x:As,y:At}}function Ap(At,As){var Au=AP();Au.prototype=At.prototype;return(As)?AU(new Au(),As):new Au()}function S(As){return(AD.ie6)?As.replace(".png",".gif"):As}function k(As){if(AD.ie6){As.className=As.className+" mqaie6"}return As}function B(As){if(String.prototype.trim){return String.prototype.trim.call(As)}if(As===null||As===undefined){return""}return As.toString().replace(/^\s+/,"").replace(/\s+$/,"")}function F(At,Au){var As=At.className;if((" "+As+" ").indexOf(" "+Au+" ")<0){return false}return true}function Ah(At,Au){var As=At.className;if((" "+As+" ").indexOf(" "+Au+" ")<0){At.className=As+(As?" ":"")+Au}}function AX(At,Au){var As=B((" "+At.className+" ").replace(" "+Au+" "," "));if(At.className!=As){At.className=As}}function N(Av,Aw){var At,As=[],Ax=new RegExp("(^|\\s)"+Aw+"(\\s|$)"),Ay,Az;if(!Av){Av=document.getElementsByTagName("body")[0]}if(Av.getElementsByClassName){Ay=Av.getElementsByClassName(Aw);for(Az=0;Az<Ay.length;Az++){As.push(Ay[Az])}return As}Ay=Av.getElementsByTagName("*");for(Az=0;Az<Ay.length;Az++){try{At=Ay[Az].className;if(At&&Ax.test(At)){As.push(Ay[Az])}}catch(Au){}}return As}function O(Au,At){var As=0;if(Au.offsetWidth){if(!At&&Au.scrollWidth&&(Au.offsetWidth!=Au.scrollWidth)){As=Au.scrollWidth}else{As=Au.offsetWidth}}else{if(Au.clip&&Au.clip.width){As=Au.clip.width}else{if(Au.style&&Au.style.pixelWidth){As=Au.style.pixelWidth}else{if(typeof Au.width=="function"){As=Au.width()}}}}return parseInt(As,10)}function AB(At){var As=0;if(At.offsetHeight){As=At.offsetHeight}else{if(At.clip&&At.clip.height){As=At.clip.height}else{if(At.style&&At.style.pixelHeight){As=At.style.pixelHeight}else{if(typeof At.height=="function"){As=At.height()}}}}return parseInt(As,10)}function Aq(Au,At){if(!Au){return null}var As;if(typeof Au.currentStyle!=="undefined"){As=Au.currentStyle}else{As=document.defaultView.getComputedStyle(Au,null)}return As[At]}function A(At,Au){if(At.type!="mouseout"&&At.type!="mouseover"){return false}var As=At.relatedTarget?At.relatedTarget:At.type=="mouseout"?At.toElement:At.fromElement;while(As&&As!=Au){As=As.parentNode}return(As!=Au)}function AC(As){function At(Au){var Av=String(Au).toUpperCase();return Av.length==1?"0"+Av:Av}if(!As){return"#000000"}if(typeof (As)=="object"){return"#"+At(As[0])+At(As[1])+At(As[2])}else{return As}}function AI(At){var As=J.MAXZOOM,Au=J.MINZOOM;At=parseInt(At);if(typeof At!="number"||isNaN(At)){return Au}if(At>As){At=As}if(At<Au){At=Au}return At}function V(At,As){return Math.sqrt(r(At,As))}function r(Au,Av){var As=Au.x-Av.x;var At=Au.y-Av.y;return As*As+At*At}function AS(Av,At,As){var Az=6371;var Au=J.Util.toRadians(Av.lat);var Ax=J.Util.toRadians(Av.lng);var Aw=Math.asin(Math.sin(Au)*Math.cos(At/Az)+Math.cos(Au)*Math.sin(At/Az)*Math.cos(As));var Ay=Ax+Math.atan2(Math.sin(As)*Math.sin(At/Az)*Math.cos(Au),Math.cos(At/Az)-Math.sin(Au)*Math.sin(Aw));return{lat:J.Util.toDegrees(Aw),lng:J.Util.toDegrees(Ay)}}function Af(A1){var BB=Array.prototype.slice.call(arguments);if(arguments.length>1){var Ax=new Array();if(arguments[1] instanceof Array){Ax=Ax.concat(arguments[1])}else{Ax=Ax.concat(Array.prototype.slice.call(arguments,1))}if(Ax.length<2){return null}var A2,A3,BC=Number.MAX_VALUE,A9=true,Aw,A8;for(i=0;i<Ax.length-1;i++){var BD=Ax[i];var BE=Ax[i+1];var Av=BD.x;var BA=BD.y;var A6=BE.x-Av;var A7=BE.y-BA;if(A6==0&&A7==0){continue}var Ay=A1.x-Av;var Az=A1.y-BA;var At=(A6*Ay+A7*Az);if(At<=0){A9=false;var A0=(Ay*Ay+Az*Az);if(A0<BC){Aw=0;A8=i;BC=A0;A2=BE.x;A3=BE.y}continue}var As=(A6*A6+A7*A7);var Au=At/As;if(Au>=1){A9=true}else{A9=false;var A4=parseInt((Av+(A6*Au)),10);var A5=parseInt((BA+(A7*Au)),10);A0=r(A1,{x:A4,y:A5});if(A0<=BC){Aw=Au;A8=i;BC=A0;A2=A4;A3=A5}}}if(A9){A0=r(A1,Ax[Ax.length-1]);if(A0<BC){Aw=1;A8=Ax[Ax.length-1];BC=A0;A2=Ax[Ax.length-1].x;A3=Ax[Ax.length-1].y}}return{x:A2,y:A3,comp:Aw,shapeIndex:A8}}return null}function w(Av){var Az=Array.prototype.slice.call(arguments);if(arguments.length>1){var Aw=new Array();if(arguments[1] instanceof Array){Aw=Aw.concat(arguments[1])}else{Aw=Aw.concat(Array.prototype.slice.call(arguments,1))}if(Aw.length<2){return false}var A0=Aw.length;var Au=false;var Ax=Av.x;var Ay=Av.y;for(var As=0,At=A0-1;As<A0;At=As++){if(((Aw[As].y>Ay)!=(Aw[At].y>Ay))&&(Ax<(Aw[At].x-Aw[As].x)*(Ay-Aw[As].y)/(Aw[At].y-Aw[As].y)+Aw[As].x)){Au=!Au}}return Au}return false}function AQ(Au){var A3=Array.prototype.slice.call(arguments);if(arguments.length>1){var Aw=new Array();if(arguments[1] instanceof Array){Aw=Aw.concat(arguments[1])}else{Aw=Aw.concat(Array.prototype.slice.call(arguments,1))}if(Aw.length<2){return false}var At=Aw[0].x,A0=Aw[0].y;var Av=Aw[1].x,A1=Aw[1].y;var Az=Math.abs((At-Av)/2)+Math.min(At,Av);var A2=Math.abs((A0-A1)/2)+Math.min(A0,A1);var Ay=Math.abs(At-Av);var A5=Math.abs(A0-A1);var As=parseFloat(Math.pow(Au.x-Az,2)/Math.pow(Ay,2));var A4=parseFloat(Math.pow(Au.y-A2,2)/Math.pow(A5,2));var Ax=As+A4;return Ax<0.27}return false}J.Util={};(function(){var At=1;s=function(Aw){if(Aw.guid){return Aw.guid}var Av=Aw["$mqa.id$"];if(!Av){Av=("$id$"+(At++));Aw["$mqa.id$"]=Av}return Av};Ar=function(){var Av,Aw;if(arguments.length==1){Av=arguments[0];Aw=(typeof Av=="string")?J._jsEval("("+Av+")"):Av;return As(Aw[0],Aw[1])}else{if(arguments.length==2){return As.apply(null,arguments)}else{}}};Util_hexToRGB=function(Aw){var Ax=parseInt(Aw.replace(/^#/,""),16);var Ay=Ax>>16&255;var Az=Ax>>8&255;var Av=Ax&255;return new Array(Ay,Az,Av)};function As(A0,Aw,Av){var A4,A5,Ay,A3,Az,Ax=arguments.callee,A1,A7=(J.browser.name=="msie"),A2=J.browser.version;if(!Av){Av={}}function A6(BG){var BC=BG.match(/^([^\#\.]+)(\#([^\.]+))?(\.(.+))?$/),BJ=BC[3],BO=BC[5],BI,BK=[],BD,BM,BN,BL,BE,BA,BP,BH,BF;BG=BC[1];if(A7&&(A2<9)&&BG=="input"){for(BD=0;BD<A4.length;BD++){BN=A4[BD];BL=A4[++BD];if(BN=="@type"&&(BL=="radio"||BL=="checkbox")){BI=true}if(BN.charAt(0)=="@"){BK[BK.length]=[BN.substring(1),BL]}}if(BI){BE=[];BA=' {field}="{value}"';BP="<input {attrs}/>";for(BM=0;BM<BK.length;BM++){BE[BE.length]=BA.replace("{field}",BK[BM][0]).replace("{value}",BK[BM][1])}BH=BG;BG=BP.replace("{attrs}",BE.join(""))}}try{BF=document.createElement(BG)}catch(BB){if(BH){BF=document.createElement(BH)}}if(BJ){Av[BJ]=BF}if(BO){BF.className=BO}return BF}function A8(BB,BC,BA){if(A7&&(A2<9)&&(BC=="type")&&((BA=="checkbox")||(BA=="radio"))){return }BB.setAttribute(BC,BA)}var A9=function(BA){if(BA.match(/&([A-Za-z0-9#]+);/g)!==null){var BB=document.createElement("div");BB.innerHTML=BA;BA=BB.childNodes[0].nodeValue;delete BB}return BA};if(typeof (A0)=="string"){A0=A6(A0);Av.root=A0}for(A5=0;A5<Aw.length;A5++){Az=Aw[A5];A3=typeof (Az);if(A3=="number"&&Az===0){}else{A4=Aw[++A5];Ay=typeof (A4);if(Ay=="undefined"){continue}if(Ay=="object"){A1=A6(Az);Ax(A1,A4,Av);A0.appendChild(A1)}else{(Az=="text"||Az=="t")?A0.appendChild(document.createTextNode(A9(A4))):(Az=="style"||Az=="s")?A0.style.cssText=A4:(Az=="i")?A0.setAttribute("src",S(A4)):(Az=="@domid"||Az=="@domId")?A0.id=A4:(Az.charAt(0)=="@")?A8(A0,Az.substring(1),A4):A0[Az]=A4}}}return Av}o(J.Util,{objectId:s,isObjectId:AG,isFunction:z,isUndefined:u,getParentOffset:M,getLocalCoords:h,getEventCoords:Ag,pointByDistanceBearing:AS,pointInPolygon:w,pointInEllipse:AQ,distance:V,closestPoint:Af,trim:B,hasClass:F,addClass:Ah,removeClass:AX,getElementsByClassName:N,_getRandomGUID:function(){return"$id$"+(At++)},subClass:Ap,html:Ar,ie6Image:S,ie6Class:k,getDomWidth:O,getDomHeight:AB,isMouseLeaveOrEnter:A,boundZoomLevel:AI,toRadians:function(Av){return Av*0.017453},toDegrees:function(Av){return Av/0.017453},arcDistance:function(Ax,A0,A2){var A4=parseFloat(Ax.lat);var A6=parseFloat(A0.lat);var Aw=parseFloat(Ax.lng);var Az=parseFloat(A0.lng);if(A4==A6&&Aw==Az){return 0}var Av=Az-Aw;var Ay=this.toRadians(90-A4);var A1=this.toRadians(90-A6);var A5=Math.cos(Ay)*Math.cos(A1)+Math.sin(Ay)*Math.sin(A1)*Math.cos(this.toRadians(Av));var A3=A2!="m"?6378.160187:3963.205;if(A5<-1){return 3.14159*A3}if(A5>=1){return 0}else{return Math.acos(A5)*A3}},hexToRGB:Util_hexToRGB});function Au(A4){var Ay={},Aw=(A4||navigator.userAgent.replace(/;?\schromeframe\/[\d\.]+/,"")||"").toLowerCase(),Ax=["firefox","msie","netscape","opera","safari","chrome"],Az=["linux","mac","windows","x11","iphone","ipad","android","webos"],A0,A1,Av,A2,A3;Ay.name=Ay.version=Ay.os="unknown";for(A0=0,A1=Ax.length;A0<A1;A0++){Av=Aw.indexOf(Ax[A0])+1;if(Av>0){Ay.name=Ax[A0];A2=Av+Ay.name.length;if(Aw.indexOf("version/")+1>0){A2=Aw.indexOf("version")+8}A3=((Ay.name=="safari")||(Aw.charAt(A2+4)>0&&Aw.charAt(A2+4)<9))?5:3;Ay.version=Aw.substring(A2,A2+A3)}}for(A0=0,A1=Az.length;A0<A1;A0++){Av=Aw.indexOf(Az[A0])+1;if(Av>0){Ay.os=Az[A0]}}if(Ay.name=="msie"&&Ay.version<7){Ay.ie6=true}return Ay}J.Util._getBrowserInfo=Au;J.Util._getComputedStyle=Aq;AD=Au();J.browser=AD;J.Util.getBrowserInfo=function(){return AD};J.Util.distanceBetween=function(Aw,A1,Ax){var Ax=Ax||"MI",A0=(Aw.lat-A1.lat)*Math.PI/180,Ay=(Aw.lng-A1.lng)*Math.PI/180,Av=Math.sin(A0/2)*Math.sin(A0/2)+Math.cos(Aw.lat*Math.PI/180)*Math.cos(A1.lat*Math.PI/180)*Math.sin(Ay/2)*Math.sin(Ay/2),A2=2*Math.atan2(Math.sqrt(Av),Math.sqrt(1-Av)),A3=6371;var Az=(Ax=="KM"?A3:(A3/1.609));return Az*A2}})();var m,E,AL;(function(){var Au={removeAll:function(Ay,Aw){var Az=this,A0=Ay,Ax;Aw=Aw||0;if(!z(Ay)){A0=function(A1){return A1==Ay}}for(Ax=Aw;Ax<Az.length;Ax++){if(A0(Az[Ax],Ax)){Az.splice(Ax,1)}}},removeAt:function(Aw){var Ax=this.splice(Aw,1);return(Ax.length>0)?Ax[0]:null},insert:function(Ax,Aw){this.splice(Ax,0,Aw)},each:function(Aw){var Az=this,Ay;for(Ay=0;Ay<Az.length;Ay++){try{Aw(Az[Ay],Ay)}catch(Ax){if(Ax===AL){return }throw Ax}}}};function As(Aw){var Ax=typeof (Aw);if(Ax=="string"||Ax=="number"){return"@$"+Aw}return"@#"+s(Aw)}function At(Aw){if(!/^@[\$#]{1}/.test(Aw)){return false}return true}function Av(){}Av.prototype={get:function(Aw){return this[As(Aw)]},put:function(Ax,Aw){Ax=As(Ax);var Ay=this[Ax];this[Ax]=Aw;return Ay},remove:function(Aw){Aw=As(Aw);var Ax=this[Aw];delete this[Aw];return Ax},keys:function(){var Aw=[],Ax;for(Ax in this){if(At(Ax)){Aw.push(Ax.slice(2))}}return Aw},each:function(Aw){var Az,Ay,A0;for(Az in this){if(!At(Az)){continue}Ay=Az.slice(2);try{Aw(this[Az],Ay)}catch(Ax){if(Ax===AL){return }throw Ax}}}};m=function(Aw){if(!Aw){Aw=[]}o(Aw,Au);return Aw};E=function(Aw){if(!Aw){return new Av()}o(Aw,Av.prototype);return Aw};J.Collection={list:m,map:E,abort:AL}})();var AK;(function(){var A2={traffic:{depends:["fullUtil","shapes","jsondeserializer","remotecollection"]},streetview360:{depends:["fullUtil","shapes"]},jsondeserializer:{depends:["basedeserializer"]}};if(window.mqaConfig&&window.mqaConfig.modules){o(A2,window.mqaConfig.modules)}var As;function A0(A4,A5){As=A4;J.Loader.resourcePath=AK=A5}function Ay(A4){var A5=A2[A4];if(!A5){A5={};A2[A4]=A5}return A5}function Aw(A4){var A5=document.createElement("script");A5.src=A4;var A6=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];A6.appendChild(A5)}function Au(){var A6,A7,A8=[],A4,A5=[];for(A6=0;A6<arguments.length;A6++){A7=arguments[A6];if(typeof A7=="string"){if(A2[A7]&&A2[A7].loaded){continue}if(A7==="traffictogglecontrol"){A7="traffictoggle"}if(A7==="trafficcontrol2"){A7="traffictoggle"}if(A7==="viewcontrol3"){A7="viewoptions"}if(A7==="zoomcontrol3"){A7="largezoom"}if(A7==="overviewmapcontrol"){A7="insetmapcontrol"}if(A7==="zoomcontrol"){A7="smallzoom"}if(A7==="zoomcontrolyp"){A7="smallzoom"}A8.push(A7);A5.push(A7);J.Log.debug("module load: "+A7)}else{if(typeof A7=="function"){A4=A7}break}}A5.push(A4);if(A8.length==0){A4();return true}else{Av(A8[0],function(){Au.apply(null,A5)})}}function Av(A6,A4){var BA=Ay(A6),A8,A9,A7,A5;if(BA.loaded){A4();return true}A8=BA.depends;if(A8){for(A7=0;A7<A8.length;A7++){A9=A2[A8[A7]];if(!A9){A9={};A2[A8[A7]]=A9}if(!A9.loaded){Au(A8[A7],function(){Au(A6,A4)});return false}}}if(BA.waiters){BA.waiters.push(A4)}else{BA.waiters=[A4];BA.requestTime=new Date().getTime();A5=BA.uri?BA.uri:As(A6,"js");Aw(A5+"?"+J.IO.cacheBust(),true)}return false}function At(A6){var A8=A2[A6],A9,A5,A7,BA;if(!A8){A8={};A2[A6]=A8}A9=A8.waiters;delete A8.waiters;A8.loaded=true;if(!A9){return }for(A7=0;A7<A9.length;A7++){BA=A9[A7];if(typeof (BA)=="function"){try{BA()}catch(A4){A5=A4}}}if(A5){throw A5}}function Ax(A4){var A5=document.createElement("style"),A6=document.getElementsByTagName("head")[0];if(!A6){return }if(AD.name=="msie"&&J.browser.version<9){A5.setAttribute("type","text/css");if(A5.styleSheet){A5.styleSheet.cssText=A4}}else{try{A5.appendChild(document.createTextNode(A4))}catch(A7){A5.setAttribute("type","text/css");if(A5.styleSheet){A5.styleSheet.cssText=A4}}}if(A6.firstChild){A6.insertBefore(A5,A6.firstChild)}else{A6.appendChild(A5)}}function A3(A4){var A5=document.createElement("link"),A6=document.getElementsByTagName("head")[0];A5.setAttribute("rel","stylesheet");A5.setAttribute("href",A4);if(!A6){return }if(A6.firstChild){A6.insertBefore(A5,A6.firstChild)}else{A6.appendChild(A5)}}function A1(A8,A6){var A9=Ay(A8),A5,A7,A4;if(A9.cssLoaded){return }if(A9.cssText){Ax(A9.cssText)}else{A3(As(A8,"css"))}if(A6&&!A9.cssText){Ax(A6)}A9.cssLoaded=true}function Az(A5,A4){Ay(A5).cssText=A4}J.Loader={_initialize:A0,_moduleLoaded:At,withModule:Au,requireCss:A1,registerCss:Az,prependCss:Ax,resourcePath:AK,isLoaded:function(A4){var A5=A2[A4];return A5&&A5.loaded},registerModules:function(A4){o(A2,A4)}};J.withModule=Au})();(function(){if(!MQCDN){MQCDN="http://content.mqcdn.com/mqtoolkit/sdk7/"}function At(Av,Au){return MQCDN+"mqa.module."+Av+"."+Au}function As(Au){return MQCDN+Au}J.Loader._initialize(At,As)})();var C={background:0,tiles:5,custom_tiles:10,shape:20,drawing_shape:21,drawing_bounding_box:22,transit_lines:31,traffic_flow:30,route_ribbon:40,poi_shadow:50,poi_leader:60,drawing_point:64,route_dragdot:65,route_poi:70,poi:80,traffic_poi:90,transit_poi:90,logo:100,ie_logo:-100,control:100,window:1000,poi_drag:2000,route_ribbon_drag:2000,tracker_360:85,hover_poi:85,streetview360path:500,active_poi:81,mqa_searchlayer_poi:2500};function AE(As){var At;if(!As){return 0}if(typeof As=="string"){At=C[As];if(!At){return 0}As=At}else{As=parseInt(As)||0}return As}function j(As,At){if(As){As.style.zIndex=AE(At)}}J.ZIndex={absolutize:AE,set:j,Registry:C};var AR,Aa,x,Am,d,t,Ao,g,e,Ae,y,R,AY,An,l,p,AA,v,T,AZ,X,AO,a,c;(function(){AR={};var Au=false,At=[],As=[];AR._onUnload=function(){if(Au){return }var Ax;for(Ax=0;Ax<At.length;Ax++){var Ay=At[Ax];try{At[Ax]()}catch(Aw){}}Au=true};AR.addOnUnload=Ao=function(Aw){At.push(Aw)};AR.$=Aa=function(Aw){return(typeof Aw=="string")?document.getElementById(Aw):Aw};p=function(Aw,Ax){return(Ax=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||Aw.attachEvent))?"keydown":Ax};var Av=[];AR.observe=x=function(Ax,Ay,A0){Ax=Aa(Ax);Ay=p(Ax,Ay);if(Ax.attachEvent){var Aw=function(){A0.apply(Ax,arguments)};Ax.attachEvent("on"+Ay,Aw);var Az=Av.length;Av[Az]=[Ax,Ay,Aw];Ax["__ie6_"+Ay]=Az}else{Ax.addEventListener(Ay,A0,false)}return A0};AR.stopObserving=Am=function(Ay,Az,A1){Ay=Aa(Ay);Az=p(Ay,Az);try{if(Ay.detachEvent){var A0=Ay["__ie6_"+Az],Aw;if(typeof (parseInt(A0,10))==="number"){Aw=Av[A0][2];delete Av[A0]}Ay.detachEvent("on"+Az,Aw)}else{Ay.removeEventListener(Az,A1,false)}}catch(Ax){}};if(AD.name==="msie"&&AD.version<8&&window.detachEvent){Ao(function(){var Ax,Ay;for(Ax in Av){Ay=Av[Ax];if(typeof Ay==="object"&&Ay.length===3){try{Ay[0].detachEvent("on"+Ay[1],Ay[2])}catch(Aw){}}}})}AR.addDtor=d=function(Aw,Ax){var Ay=As.length,Az;if(arguments.length>1){Az=[Aw,Ax]}else{Az=[Aw]}As[Ay]=Az;return Ay};AR.delDtor=t=function(Aw){delete As[Aw]};AR._dtorHandler=function(){AR._inGlobalDtor=true;var Ax,Ay;for(Ax in As){Ay=As[Ax];if(Ay&&(typeof Ay=="object")&&Ay.length){try{if(Ay.length==1){Ay[0].call(null)}else{Ay[0][Ay[1]].call(Ay[0])}}catch(Aw){}try{delete As[Ax]}catch(Aw){}}}};x(window,"unload",AR._onUnload);Ao(AR._dtorHandler)})();AR.element=g=function(As){return As.target||As.srcElement};AR.isLeftClick=e=function(As){return((As.which&&(As.which==1))||(As.button&&(As.button==1)))};AR.isRightClick=Ae=function(As){return((As.which&&(As.which==3))||(As.button&&(As.button==2)))||((As.which==1&&As.ctrlKey))};AR.stop=y=function(As){try{As.cancelBubble=true;if(As.preventDefault){As.preventDefault();As.stopPropagation()}else{As.returnValue=false}}catch(At){}};AR.falseFunction=R=function(){return false};AR.unselectable=AY=function(As){As.onselectstart=R;As.unselectable=true;As.style.MozUserSelect="none"};AR.hitch=An=function(Au,At){var As=Array.prototype.slice.call(arguments,2);return function(){var Av=Array.prototype.slice.call(arguments);return Au[At].apply(Au,As.concat(Av))}};AA=AR.EventCallback=function(At,As){return function(Au){if(!Au){Au=window.event}At[As](Au)}};AR.AddDOMEventProtocol=l=function(As){if(!As._onDOMEvent){As._onDOMEvent=function(){}}AU(As,{addDOMEvent:function(){if(!this._domSubs){this._domSubs=[]}var At=this._domWired,Aw=this._domSubs,Ax,Au,Av,Ay,Az;for(Av=0;Av<arguments.length;Av++){Ax=arguments[Av];Au=false;for(Az=0;Az<Aw.length;Az++){if(Aw[Az]===Ax){Au=true}}if(Au){continue}Aw.push(Ax);if(!At){continue}for(Ay=0;Ay<At.length;Ay++){x(At[Ay],Ax,At._h)}}},_wireDOMEvents:function(Au){var At=this._domWired,Aw=this._domSubs,Av;if(!At){At=this._domWired=m();At._h=AA(this,"_onDOMEvent")}At.push(Au);if(!Aw){return }for(Av=0;Av<Aw.length;Av++){x(Au,Aw[Av],At._h)}},_unwireDOMEvents:function(Au){var At=this._domWired,Aw=this._domSubs,Av,Ax;if(!At){return }if(At&&!Aw){At.removeAll(function(Ay){return Ay===Au});return }if(arguments.length==0){for(Av=0;Av<At.length;Av++){for(Ax=0;Ax<Aw.length;Ax++){Am(At[Av],Aw[Ax],At._h)}}this._domWired=null}else{At.removeAll(function(Ay){if(Ay===Au){for(Ax=0;Ax<Aw.length;Ax++){Am(Ay,Aw[Ax],At._h)}return true}return false})}},dispose$Before:function(){this._unwireDOMEvents()}})};J.EventUtil=AR;v=function(As,At){this.type="event";this.eventName=As||"unnamed event";this.srcObject=At};J.Event=v;J.EventManager=T=new function(){var Au=this,As={};function At(Av){var Aw=s(Av),Ax=As[Aw];if(!Ax){Ax={};As[Aw]=Ax}return Ax}Au.addListener=AZ=function(Ax,A0,Az,Av){A0=A0.toLowerCase();Av=Av||Ax;var Aw=At(Ax),Ay=Aw[A0];if(!Ay){Ay=[];Aw[A0]=Ay}Ay.push([Az,Av]);return Az};Au.removeListener=X=function(Ax,A1,A0,Av){A1=A1.toLowerCase();Av=Av||Ax;var Aw=At(Ax),Ay=Aw[A1],Az,A2;if(!Ay){return }for(A2=0;A2<Ay.length;A2++){Az=Ay[A2];if(Az[0]===A0&&Az[1]===Av){Ay.splice(A2,1)}}return A0};Au.clearListeners=AO=function(Aw,Ax){Ax=Ax.toLowerCase();var Av=At(Aw);delete Av[Ax]};Au.clearAllListeners=a=function(Av){var Aw=s(Av);delete As[Aw]};Au.trigger=c=function(Av,A2,Ax){A2=A2.toLowerCase();var A3=At(Av),Az=A3[A2],A1,Ay,Aw,A0;if(Az){for(A1=0;A1<Az.length;A1++){Ay=Az[A1];Aw=Ay[0];A0=Ay[1];if(Aw){Aw.call(A0,Ax)}}}if(typeof Av.onEvent==="function"){Av.onEvent(A2,Ax)}}};var P,b,Ak=[];(function(){var At=0.7853981633974483,Az=6378137,Aw=2*Math.PI/360,Ay=Aw*Az,Ax=156543.0339;while(Ax>0.1){Ak.push(Ax);Ax*=0.5}function Au(A2){var A3=19720821,A5=0,A4,A1;for(A1=0;A1<Ak.length;A1++){A4=Math.abs(Ak[A1]-A2);if(A4<A3){A3=A4;A5=A1}}return A5}function Av(A1){return(Math.exp(A1)-Math.exp(-A1))*0.5}function As(A1){A1%=360;if(A1<-180){A1+=360}else{if(A1>180){A1-=360}}return A1}function A0(A1,A2){return[Math.min(A1[0],A2[0]),Math.min(A1[1],A2[1]),Math.max(A1[0],A2[0]),Math.max(A1[1],A2[1])]}P=new function(){this.id="mercator";this.unit="meters";var A1=[0,0],A5=1e-8,A2=0,A3=Math.cos(A2),A4=20037508.34;this.forward=function(BA){var A9=BA[0],A7=BA[1],A8=[],BB,A6;BB=A9*A4/180;A6=Math.log(Math.tan((90+A7)*Math.PI/360))/(Math.PI/180);A6=A6*A4/180;A8[0]=BB;A8[1]=A6;return A8};this.inverse=function(A8){var BA=[],A9=A8[0],A7=A8[1],BB,A6;BB=(A9/A4)*180;A6=(A7/A4)*180;A6=180/Math.PI*(2*Math.atan(Math.exp(A6*Math.PI/180))-Math.PI/2);BA[0]=BB;BA[1]=A6;return BA}};b=function(A1){var A2=this;A2.id="tilecache";A2.zoomLevel=9;A2.globalProjection=A1;A2.resolution;A2.setResolution=function(A3){if(!A3){return }A2.resolution=A3;A2.zoomLevel=Au(A3);return A2.zoomLevel};A2.copy=function(){var A3=new b(A1);A3.zoomLevel=A2.zoomLevel;A3.globalProjection=A2.globalProjection;A3.resolution=A2.resolution;return A3};A2.forwardGlobal=function(A5){var A4=A1.forward(A5),A3=A2.forwardPhysical(A4);return A3};A2.inverseGlobal=function(A5){var A4=A2.inversePhysical(A5),A3=A1.inverse(A4);return A3};A2.forwardPhysical=function(A4){var A6=Ak[A2.zoomLevel],A3=[],A5;for(A5=0;A5<A4.length;A5++){A3[A5]=A4[A5]/A2.resolution}return A3};A2.inversePhysical=function(A5){var A3=Ak[A2.zoomLevel],A4=[],A6;for(A6=0;A6<A5.length;A6++){A4[A6]=A5[A6]*A2.resolution}return A4};A2.getTileCoords=function(A5){var A8=A5[0],A4=A5[1],A6=(1<<A2.zoomLevel),A3=(A8+180)/360*A6,A9=A4*Aw,A7=(1-Math.log(Math.tan(A9)+1/Math.cos(A9))/Math.PI)/2*A6;return[A3,A7]};A2.fromTileCoordsToLngLat=function(A6,A5){var A3=A6[0],A4=A6[1],A7=A5?A5:A2.zoomLevel;zoomFactor=(1<<A7);A3=(A3*360/zoomFactor);A3-=180;A4=Math.PI-(2*Math.PI*A4/zoomFactor);A4=Math.atan(Av(A4))/Aw;return[A3,A4]}};J._RESOLUTIONS=Ak;J.MercatorGlobalProjection=P;J.DisplayProjection=b})();function Ad(At,Au,Av,Aw,Ax){var As=this;As.lngLat=At;As.zoom=Au;As.resolution=Av;As.displayProj=Aw;As.refxy=Ax}Ad.prototype={deviceToProjected:function(As){var At=[];At[0]=As[0]+this.refxy[0];At[1]=this.refxy[1]-As[1];return At},projectedToDevice:function(At){var As=[];As[0]=At[0]-this.refxy[0];As[1]=this.refxy[1]-At[1];return As},displayToLatLng:function(As,At){var Av=this.deviceToProjected([As,At]),Au=this.displayProj.inverseGlobal(Av);return{lng:Au[0],lat:Au[1]}},latLngToDisplay:function(At,Au){var Av=this.displayProj.forwardGlobal([parseFloat(Au),parseFloat(At)]),As=this.projectedToDevice(Av);return{x:parseInt(As[0]),y:parseInt(As[1])}}};function D(Au){var At=document.createElement("div"),As;if(window.MQLOADINGIMAGE){As=MQLOADINGIMAGE}else{As=AK("images/loading-tile-gears.jpg")}At.style.position="absolute";At.style.backgroundImage="url("+As+")";At.style.backgroundRepeat="repeat";Au.zlevel("background").appendChild(At);this.div=At;this.display=Au}D.prototype={setViewport:function(Aw,At,Au,As){var Av=this;if(Aw>=Av.ulX&&At>=Av.ulY&&(Aw+Au)<=(Av.ulX+Av.width)&&(At+As)<=(Av.ulY+Av.height)){return }Av.ulX=Aw-4*256;Av.ulY=At-4*256;Av.width=Au+8*256;Av.height=As+8*256;Av.div.style.left=Av.ulX+"px";Av.div.style.top=Av.ulY+"px";Av.div.style.width=Av.width+"px";Av.div.style.height=Av.height+"px"}};var AT;(function(){function As(Av,Aw){var Ax=this;Ax.map=Av;Ax.elt=Aw;Ax.layers={};Ax.zlevels=[];Ax.defaultGlobalProjection=P;Ax.defaultDisplayProjection=new b(Ax.defaultGlobalProjection)}As.prototype={zlevel:function(Av,Ax){var Az=this,Aw=Az.zlevels,A0,Ay;Av=AE(Av)||0;for(Ay=0;Ay<Aw.length;Ay++){A0=Aw[Ay];if(A0._z==Av&&A0._f==!!Ax){return A0}}A0=document.createElement("div");A0._z=Av;A0._f=!!Ax;A0.style.position="absolute";A0.style.zIndex=Av;A0.className="mqa-zl mqa-zl"+Av+(Ax?" mqa-zlf":" mqa-zlgl");if(!Ax&&Az._inited){A0.style.left=Az.left+"px";A0.style.top=Az.top+"px"}Aw.push(A0);Az.elt.appendChild(A0);return A0},findParent:function(Av){while(Av){if(Av.parentNode===this.elt){return Av}Av=Av.parentNode}return null},ancestorEventCoords:function(Aw){var Ax=this,Av=h(Ax.elt,Aw),Ay=Ax.ulX+Av.x,Az=Ax.ulY+Av.y;return{screen:Av,display:{x:Ay,y:Az},latLng:Ax.transform.displayToLatLng(Ay,Az)}},addLayer:function(Aw,Ax){var Ay=this;Ay.removeLayer(Aw);Ay.layers[Aw]=Ax;try{if(Ax.resetTransform){Ax.resetTransform(Ay.transform)}if(Ax.setViewport){Ax.setViewport(Ay.ulX,Ay.ulY,Ay.width,Ay.height)}}catch(Av){n("setViewport layer "+Aw,Av)}},removeLayer:function(Aw){var Ax=this.layers[Aw];if(Ax&&Ax.dispose&&typeof Ax.dispose==="function"){try{Ax.dispose()}catch(Av){n("dispose layer "+Aw,Av)}delete this.layers[Aw]}},eachLayer:function(Ay){var Av=this.layers,Aw,Ax;for(Aw in Av){Ax=Av[Aw];if(Ax&&typeof Ax==="object"){Ay(Ax,Aw)}}},invalidateLayer:function(Av){var Aw=this;if(typeof Av==="string"){Av=Aw.layers[Av]}if(!Av){return }Av.setViewport(Aw.ulX,Aw.ulY,Aw.width,Aw.height)},beginAnimate:function(A0,A2,A3,A1,Av,Aw){var Ay=this.defaultDisplayProjection.copy(),A4,Ax,Az;Ay.setResolution(parseFloat(A2));A4=Ay.inverseGlobal([A1,A3]);Ax=Ay.forwardGlobal([A1,A3]);Az=new Ad(A4,A0,A2,Ay,Ax);this.eachLayer(function(A5){if(A5.beginAnimate){A5.beginAnimate(Az,Av,Aw)}})},endAnimate:function(){this.eachLayer(function(Av){if(Av.endAnimate){Av.endAnimate()}})},initTransform:function(Ax,A3,A4,A1,A6,Ay){var Aw=this,Av=Aw.map,A2=Aw.defaultDisplayProjection,A0,Az,A5;A2.setResolution(parseFloat(A3));A0=[A1,A4];Az=A2.forwardGlobal(A0);A5=new Ad(A0,Ax,A3,A2,Az);Aw.transform=A5;Aw.cancelDrag();Aw.eachLayer(function(A7){if(A7.resetTransform){A7.resetTransform(A5)}});Aw.setViewport(-A6/2,-Ay/2,A6,Ay)},setViewport:function(A0,Av,Ax,A1){var Az=this,Aw=Az.zlevels,A2,Ay;Az._inited=true;Ax=Ax||Az.width;A1=A1||Az.height;Az.width=Ax;Az.height=A1;Az.ulX=A0;Az.ulY=Av;Az.left=-A0;Az.top=-Av;for(Ay=0;Ay<Aw.length;Ay++){A2=Aw[Ay];if(!A2._f){A2.style.left=Az.left+"px";A2.style.top=Az.top+"px"}}Az.eachLayer(function(A5,A3){try{if(A5.setViewport){A5.setViewport(A0,Av,Ax,A1)}}catch(A4){}})},startDrag:function(Aw,Ay){var A1=this,Az=A1.ancestorEventCoords(Aw),Ax=Az.display;A1.cancelDrag();Ay.startXY=Ax;Ay.startLatLng=Az.latLng;Ay.dragXY=Ax;Ay.dragLatLng=Ay.startLatLng;function A0(A2){if(!A2){A2=window.event}var A3=A2.type,A4=A1.ancestorEventCoords(A2);Ay.dragXY=A4.display;Ay.dragLatLng=A4.latLng;if(A3==="mousemove"){if(Ax.x!=A4.display.x||Ax.y!=A4.display.y){if(Ay.dragMove){Ay.dragMove()}}}else{if(A3==="mouseup"){Av();if(Ay.dragEnd){Ay.dragEnd(A2)}}}y(A2)}x(document,"mousemove",A0);x(document,"mouseup",A0);function Av(){Am(document,"mousemove",A0);Am(document,"mouseup",A0);A1.currentDrag=null}Ay.display=A1;Ay.cancelDrag=function(){Av();if(Ay.dragCancelled){Ay.dragCancelled()}};A1.currentDrag=Ay;if(Ay.dragStart){Ay.dragStart()}},cancelDrag:function(){if(this.currentDrag){this.currentDrag.cancelDrag()}}};function At(Av,Ax){if(!Ax||!Ax.style){return }var Aw=Ax.offsetWidth||Ax.style.width,Ay=Ax.offsetHeight||Ax.style.height;if(Aw.length>0&&Ay.length>0){Av.style.width=Aw;Av.style.height=Ay;return }Av.style.width=Aq(Ax,"width");Av.style.height=Aq(Ax,"height")}function Au(){var Aw=Math.floor(AD.version),Av;if(AD.name!=="msie"){return""}switch(Aw){case 6:Av="ie6";break;case 7:Av="ie7";break;case 8:Av="ie8";break;default:Av="ie9"}return" "+Av}AT=function(Az,Aw,Av){if(arguments.length===0){return }Aw=AI(Aw);var A0=this,Ay=document.createElement("div");At(Ay,Az);Ay.style.zIndex=0;Ay.style.overflow="hidden";Ay.style.background="#FFFFFF";Ay.style.position="relative";Ay.style.top="0px";Ay.style.left="0px";Az.style.position="relative";Az.appendChild(Ay);A0.parent=Ay;A0.width=O(Ay,true)||parseInt(Ay.style.width);A0.height=AB(Ay,true)||parseInt(Ay.style.height);A0.zoom=Aw;A0.resolution=Ak[A0.zoom];A0.tilesize=J.TILESIZE;A0.centerlat=Av.lat;A0.centerlng=Av.lng;var Ax=document.createElement("div");Ax.style.position="absolute";Ax.style.zIndex=0;Ax.id="mqa_display_div";Ax.className="mqa-display"+Au();Ay.appendChild(Ax);A0.display=new As(A0,Ax);A0.display.initTransform(A0.zoom,A0.resolution,Av.lat,Av.lng,A0.width,A0.height)}})();var Ac,H,U,Ai;(function(){function As(Au){var At=document.createElement("img");At.tileStartTime=new Date().getTime();At.tileLoading=true;At.onload=function(){this.tileLoadTime=new Date().getTime()-this.tileStartTime;this.tileLoading=false;this.style.visibility="";T.trigger(Au,"tileloaded",new v("MQA.Tile.loaded",Au))};At.onabort=At.onerror=function(){this.tileLoading=false};At.setAttribute("unselectable","on");At.setAttribute("galleryimg","no");At.style.MozUserSelect="none";At.style.visibility="hidden";return At}Ac=function(Au,At){var Av=this;Av.zoom=Au;Av.colRow=At;Av.type="map";Av.servers=MAPSERVER};o(Ac.prototype,{getKey:function(){var At=this;return At.zoom+":"+Math.floor(At.colRow[0])+":"+Math.floor(At.colRow[1])},getServer:function(){var Au=this.colRow,Av=Math.floor(Math.abs(Au[0])),Ax=Math.floor(Math.abs(Au[1])),At=this.servers,Aw=At[(Av+Ax)%At.length];return MQPROTOCOL+Aw},getPath:function(){var At=this.type;var Au="";if(At.indexOf("/")!=-1){At=At.split("/")[1]}switch(At){case"map":Au=MAPSERVER_TILEPATH;break;case"sat":Au=SATSERVER_TILEPATH;break;case"hyb":Au=HYBSERVER_TILEPATH;break}return Au},getElt:function(){var Ay=this,Ax=Ay.colRow,A2=Math.floor(Ax[0]),At=Math.floor(Ax[1]),A0=Ay.zoom,Az=[Ay.getServer()],Aw="/herebedragons.png",Av=(1<<A0),Au=Av-1,A1;Az.push(Ay.getPath()+"/"+A0);if((At<0)||(At>Au)){return Aw}if((A2<0)||(A2>Au)){A2=Ax[0];A2%=Av;if(A2<0){A2+=Av}A2=Math.floor(A2)}Az.push("/"+A2);Az.push("/"+At);Az.push(".png");A1=As(Ay);A1.src=Az.join("");return A1}});H=function(Au,At){Ac.call(this,Au,At)};H.prototype=new Ac();SatTile=function(Au,At){var Av=this;Ac.call(Av,Au,At);Av.type="";Av.servers=SATSERVER};SatTile.prototype=new Ac();SatTile.prototype.getPath=function(){return SATSERVER_TILEPATH};J.Tile=Ac;J.MapTile=H})();var f;(function(){function As(Au,Av,Aw,Ax){var Ay,Az;Au=[Math.floor(Au[0]),Math.floor(Au[1])];Ay=Aw.fromTileCoordsToLngLat(Au,Av);Az=Aw.forwardGlobal(Ay);return Ax.projectedToDevice(Az)}function At(Aw,Au,Ay,Az,A0,Ax){var Av;Av=As(Au,Ay,Az,A0);Aw.style.position="absolute";Aw.style.left=Math.round(Av[0])+"px";Aw.style.top=Math.round(Av[1])+"px";Aw.width=Ax}f=function(Au){var Av=this,Aw=document.createElement("div");Aw.style.position="absolute";Av.key=Au.key;Av.type=Au.type||"";Av._display=Au.display;Av.tileCls=Au.tileCls||H;Av.zindex=Au.zindex||"tiles";Av.elt=Aw;Av.displayProjection=new b(P);Av.tileBucket=E();Av.tilesLoaded=false};f.prototype={attach:function(Au){var Av=this;if(Av._display){return }Av._display=Au;Au.zlevel(Av.zindex).appendChild(Av.elt);Au.addLayer(Av.key,Av);return Av},detach:function(){var Av=this,Au=Av._display;if(!Au){return false}Au.removeLayer(Av.key);Av._display=null;return true},dispose:function(){var Au=this.elt;this.clearCache();if(Au&&Au.parentNode){Au.parentNode.removeChild(Au)}},clearCache:function(){var Av=this,Aw=Av.elt,Au;Av.tileBucket=E();while(Aw.hasChildNodes()){Au=Aw.firstChild;Aw.removeChild(Au)}},resetTransform:function(Au){if(!Au){return }this.displayProjection=Au.displayProj;var A1=this,Ay=A1.displayProjection,Av=Au.lngLat,Aw=Au.zoom,Az=Au.resolution,Ax=Au.displayProj,A0=Au.refxy;if(Aw!=A1.lastZoom){A1.clearCache();A1.lastZoom=Aw}Ay.setResolution(Az);A0=Ay.forwardGlobal([Av[0],Av[1]]);A1.transform=new Ad(Av,Aw,Az,Ay,A0)},setViewport:function(A0,Au,Ax,A1){var Az=this,Av=0,Aw=0,Ay;Az.tilesLoaded=false;Ay=function(A2){Av-=1;Aw-=1;if(Av===0){Az.tilesLoaded=true;T.trigger(Az,"tilesloaded",new v("MQA.TileLayer.tilesloaded",Az))}if(Aw===0){T.trigger(Az,"alltilesloaded",new v("MQA.TileLayer.alltilesloaded",Az))}T.removeListener(A2.srcObject,"tileloaded",Ay)};Az.collectTiles(A0,Au,Ax,A1,function(A6,A5){var A7=A6.getKey(),A3=Az.tileBucket,A2=Az.elt,A4=A3.get(A7);Aw+=1;if(!A4){Av+=1;T.addListener(A6,"tileloaded",Ay);A4=A6.getElt();A3.put(A7,A4);A4._k=A7}A2.appendChild(A4);At(A4,A6.colRow,A6.zoom,Az.displayProjection,Az.transform,A5)})},parseTileInfo:function(Au){if(Au){var Av=Au.split(":");Av[0]=parseInt(Av[0],10);Av[1]=parseInt(Av[1],10);Av[2]=parseInt(Av[2],10);return Av}return false},computeTileSize:function(Au,Aw){var Av=256;if(Au!=Aw){var Ax=Au/Aw;Av=parseInt(256*Ax,10)+1}return Av},fixTilesPlacement:function(A8,BD,A0,A6,A3,Av,BH){var A2=this,Ax=A2.tileBucket,Au=A2.elt;if(Au){var BC=Au.childNodes.length,A1=0;for(var Az=Au.childNodes.length-1;Az>=0;Az--){child=Au.childNodes[Az];if(child._k){if(child.complete){var Ay=A2.parseTileInfo(child._k),BG=Ay[0],A9=Ay[1],BA=Ay[2],A5=J._RESOLUTIONS[BG],A7=A2.computeTileSize(A5,BD.resolution);var BE=As([A9,BA],BG,BD,A8);var BF=BE[0];var A4=BE[1];var Aw=BF+A7;var BB=A4+A7;if(!(BF<A3&&A0<Aw&&A4<Av&&A6<BB)){Ax.remove(child._k);Au.removeChild(child)}else{if(BG==BD.zoomLevel){A1++}}}}}for(var Az=Au.childNodes.length-1;Az>=0;Az--){child=Au.childNodes[Az];if(child._k){var Ay=A2.parseTileInfo(child._k),BG=Ay[0],A9=Ay[1],BA=Ay[2],A5=J._RESOLUTIONS[BG];if(child.complete){if(BG==BD.zoomLevel||A1<BH){var A7=A2.computeTileSize(A5,BD.resolution);At(child,[A9,BA],BG,BD,A8,A7)}else{Ax.remove(child._k);Au.removeChild(child)}}else{if(BG!=BD.zoomLevel){Ax.remove(child._k);Au.removeChild(child)}}}}}},removeTiles:function(A4,Ax,Au,A0){var Aw=this,Az=Aw.tileBucket,A5=Aw.elt;if(A5){var A2=A5.childNodes.length;for(var A3=A5.childNodes.length-1;A3>=0;A3--){child=A5.childNodes[A3];if(child._k){if(child.width&&child.width>0){var A6=parseInt(child.style.left,10);var A1=parseInt(child.style.top,10);var Ay=A6+child.width;var Av=A1+child.height;if(!(A6<Au&&A4<Ay&&A1<A0&&Ax<Av)){Az.remove(child._k);A5.removeChild(child)}}}}}},collectTiles:function(Ax,A0,Av,Ay,BE){var Az=this,A4=Az.transform,BI=Az.displayProjection,BF=BI.zoomLevel,BJ=Az.tileCls,A7=A4.displayToLatLng(Ax,A0),A1=A4.displayToLatLng(Ax+Av,A0+Ay),BG=BI.getTileCoords([A7.lng,A7.lat]),BL=BI.getTileCoords([A1.lng,A1.lat]),BA=Math.min(BG[0],BL[0]),BB=Math.max(BG[0],BL[0]),BC=Math.min(BG[1],BL[1]),BD=Math.max(BG[1],BL[1]),A8=Az._display.map.isMobile?0:1,A9=(1<<BF)-1,BM=[],BN,BO,A5,A6,Aw,BP,Au;var A2=J._RESOLUTIONS[BI.zoomLevel],A3=256;BA-=A8;BB+=A8;BC-=A8;BD+=A8;BC=Math.max(0,BC);BD=Math.min(A9,BD);if(250<(BB-BA)*(BD-BC)){return }var BH=(BB-BA+1)*(BD-BC+1);Az.fixTilesPlacement(A4,BI,Ax,A0,Ax+Av,A0+Ay,Math.round(BH));if(A2!=BI.resolution){return }BN=(BA+BB)/2;BO=(BC+BD)/2;for(BP=BA;BP<=BB;BP++){for(Au=BC;Au<=BD;Au++){A5=BP-BN;A6=Au-BO;Aw=Math.sqrt((A5*A5)+(A6*A6));BP=Math.floor(BP);Au=Math.floor(Au);BM.push([BP,Au,Aw])}}BM.sort(function(BQ,BR){return BQ[2]-BR[2]});for(BP=0;BP<BM.length;BP++){var BK=new BJ(BF,BM[BP]);BK.type=Az.type;BE(BK,A3)}}};J.TileLayer=f})();var K;(function(){K=function(At,As){this.id=At;this.tileLayers=As||[]};K.prototype={activate:function(Au){var At=this.tileLayers,As;for(As=0;As<At.length;As++){Au.addTileLayer(At[As])}},deactivate:function(Au){var At=this.tileLayers,As;for(As=0;As<At.length;As++){Au.removeTileLayer(At[As])}}};K.generateDefaultMapTypes=function(){var Aw=new m(),Au=window.TILEVERSION||"vx",As=new f({key:"map_tiles",type:Au+"/map"}),At=new f({key:"sat_tiles",type:Au+"/sat"}),Av=new f({key:"hyb_tiles",type:Au+"/hyb"});Aw.push(new K("map",[As]));Aw.push(new K("sat",[At]));Aw.push(new K("hyb",[At,Av]));return Aw};J.StandardMapType=K})();var Aj;(function(){J.MapLogo={MAPQUEST:0,SCALES:1};J.MapCorner={TOP_LEFT:J.CORNER_TOPLEFT,TOP_RIGHT:J.CORNER_TOPRIGHT,BOTTOM_LEFT:J.CORNER_BOTTOMLEFT,BOTTOM_RIGHT:J.CORNER_BOTTOMRIGHT};function Aw(Ay){var Ax=Ay.srcElement||Ay.target;Ay.cancelBubble=true;if(Ay.stopPropagation){Ay.stopPropagation()}}function Av(Ax,Az,Ay){Az=Az+"px";Ay=Ay+"px";switch(Ax._corner){case 1:Ax.style.left=Az;break;case 2:Ax.style.top=Ay;break;case 3:Ax.style.left=Az;Ax.style.top=Ay;break}}function Au(Ax){return Ax.nodeType>0}Aj=function(Ax){var Ay=this,A3,Az=J.MINZOOM,A6={lat:38.134557,lng:-98.4375},A7="map",A8,A5,A4=(arguments.length===1&&!(Au(arguments[0])));Ay.bestFitMargin=0;if(A4){A3=AR.$(Ax.elt);Az=Ax.zoom||Az;A6=Ax.latLng||A6;A7=Ax.mtype||A7;Ay.zoomOnDoubleClick=typeof Ax.zoomOnDoubleClick!=="undefined"?Ax.zoomOnDoubleClick:true;Ay.bestFitMargin=Ax.bestFitMargin||0;A5=Ax.collection||null;Ay.isMobile=Ax.mobile||false}else{A3=arguments[0];Az=arguments[1]||Az;A6=arguments[2]||A6;A7=arguments[3]||A7;A8=arguments[4];Ay.zoomOnDoubleClick=true}AT.call(Ay,A3,Az,A6);AR.observe(window,"resize",function(){Ay.setSize()});Ay.controls=[];var A0=Ay.display.zlevel("control",true);A0.style.cursor="default";Ay.controlAnchors=[];Ay._createControlAnchor(0,A0);Ay._createControlAnchor(1,A0);Ay._createControlAnchor(2,A0);Ay._createControlAnchor(3,A0);Ay._placeControlAnchors();Ay.setDraggable((Ax&&Ax.draggable)?Ax.draggable:true);Ay._point_mousecursor="pointer";Ay._crosshair_mousecursor="crosshair";Ay._default_mousecursor="default";Ay.display.addLayer("loading",new D(Ay.display));Ay._tileLayers=m();Ay._mapTypes=K.generateDefaultMapTypes();Ay._currentMapType=null;Ay.mapType="";Ay._initLogos();Ay.addDOMEvent("mousedown");Ay.addDOMEvent("dblclick");Ay._wireDOMEvents(Ay.display.elt);x(A3,"contextmenu",function(A9){y(A9);return false});Ay.saveState();Ay.onMapInit();if(A8){Ay.bestFitMargin=(typeof A8.bestFitMargin==="number")?A8.bestFitMargin:0;if(A8.bestFitRect){Ay.zoomToRect(A8.bestFitRect,A8.keepCenter)}}if(A5){Ay.addShapeCollection(A5);Ay.zoomToRect(A5.getBoundingRect())}if(Ay._mapTypes.length>0){Ay.setMapType(A7||Ay._mapTypes[0].id)}Ay._dtorHandle=d(Ay,"dispose");if(A4&&Ax.useRightClick){J.withModule("rightclick",function(){Ay.rightclick=new J.RightClick(Ay)})}if(J.browser.name=="msie"&&(A3.parentNode.align=="center"||A3.align=="center"||A3.parentNode.tagName=="CENTER"||A3.tagName=="CENTER")){var A1=0,A2=(-1)*(Ay.display.height/2);Ay.display.setViewport(A1,A2)}if(J.browser.os=="ipad"||J.browser.os=="iphone"||J.browser.os=="android"){J.withModule("iphone",function(){Ay.iphone=new J.iPhone(Ay)})}};Aj.prototype=o(new AT(),{isDraggable:function(){return this.draggable},setDraggable:function(Ay){var Ax=this;Ax.draggable=Ay;if(Ax.draggable){switch(J.browser.name){case"firefox":Ax._grab_mousecursor="-moz-grab";Ax._grabbing_mousecursor="-moz-grabbing";break;case"chrome":case"safari":Ax._grab_mousecursor="-webkit-grab";Ax._grabbing_mousecursor="-webkit-grabbing";break;default:Ax._grab_mousecursor="url("+J.RESOURCES+"grab.cur), default";Ax._grabbing_mousecursor="url("+J.RESOURCES+"grabbing.cur), default";break}}else{Ax._grab_mousecursor="default";Ax._grabbing_mousecursor="default"}Ax.parent.style.cursor=Ax._grab_mousecursor},dispose:function(){t(this._dtorHandle);var Ax=this,Ay=Ax.parent.parentNode;while(Ay&&Ay.hasChildNodes()){Ay.removeChild(Ay.firstChild)}},_createControlAnchor:function(Ay,Az){var A0=this,Ax=document.createElement("div");Ax.style.position="absolute";Ax._corner=Ay;A0.controlAnchors.push(Ax);Av(Ax,A0.width,A0.height);if(Az){Az.appendChild(Ax)}return Ax},_placeControlAnchors:function(){var Ay=this,Az=Ay.controlAnchors,Ax;for(Ax=0;Ax<Az.length;Ax++){Av(Az[Ax],Ay.width,Ay.height)}},_onDOMEvent:function(Az){try{var A3=this,A0=Az.type,A1=A3.display.findParent(g(Az)),Ax=Ae(Az),A2;if(A1&&(A1._f&&!A1._tgr)){return }if(A0==="mousedown"){if(Ax){A3.handleRightClickEvent(Az)}else{if(A3.draggable){A2=new Ab(A3);A3.display.startDrag(Az,A2)}}}else{if(A0==="dblclick"){if(A3.draggable){A2=new Ab(A3);A2.doubleClick()}}}y(Az)}catch(Ay){return }},connectSuppressEvents:function(Ax){x(Ax,"mousedown",Aw);x(Ax,"click",Aw)},disconnectSuppressEvents:function(Ax){Am(Ax,"mousedown",Aw);Am(Ax,"click",Aw)},_initLogos:function(){var Ax=this,A0=(typeof I==="undefined"?null:new I()),A5=document.createElement("img"),Ay=AK("images/questy.png"),Az=61,A4=43,A3=Ax.display.zlevel("logo",true),A1,A2;if(Ax.width<J.TN_VIEWPORT||Ax.height<J.TN_VIEWPORT){Ax.logos=[];return }if(J.FORCE_SMALL_LOGO||(Ax.width<J.SM_VIEWPORT)||(Ax.height<J.SM_VIEWPORT)){Ay=AK("images/questy_sm.png");Az=97;A4=15;if(A0){A0.elt.style.display="none"}}A5.className="questyLogo";A5.src=Ay;A5.width=Az;A5.height=A4;A5.style.width=Az+"px";A5.style.height=A4+"px";A5.style.MozUserSelect="none";A5.unselectable="no";A5.corner=J.LOGO_POSITION||J.CORNER_BOTTOMLEFT;A5.offset={x:5,y:5};A5.style.position="absolute";A5.style.display="block";if(J.browser.name==="msie"&&J.browser.version<10){J.ZIndex.set(A5,"ie_logo")}if(A0){A0.update(Ax.getCenter(),Ax.getZoomLevel())}Ax.scaleBar=A0;A1=Ax.logos=[A5];if(A0){A1.push(A0.elt)}var A6=this.parent.parentNode.parentNode;if(A6!=null){if(J.browser.name=="msie"&&(A6.align=="center"||this.parent.parentNode.align=="center"||A6.tagName=="CENTER"||this.parent.parentNode.tagName=="CENTER")){if(A0.elt.style!=null){A0.elt.style.width="200px";if(A0.elt.childNodes[0]!=null){A0.elt.childNodes[0].style.height="12px"}if(A0.elt.childNodes[1]!=null){A0.elt.childNodes[1].style.height="12px"}}}}for(A2=0;A2<A1.length;A2++){A3.appendChild(A1[A2])}Ax._updateLogoPositions()},_updateLogoPositions:function(){var A3=this,Ax=A3.logos,Az,A0,A1,A2,Ay=this.parent.parentNode.parentNode;for(A2=0;A2<Ax.length;A2++){Az=Ax[A2];A0=0;A1=0;if(Az.corner===J.CORNER_BOTTOMRIGHT||Az.corner===J.CORNER_TOPRIGHT){A0=A3.width-parseInt(Az.style.width)-Az.offset.x}else{A0=Az.offset.x}if(Az.corner===J.CORNER_BOTTOMRIGHT||Az.corner===J.CORNER_BOTTOMLEFT){A1=A3.height-parseInt(Az.style.height)-Az.offset.y}else{A1=Az.offset.y}if(Ay!=null){if(J.browser.name=="msie"&&(Ay.align=="center"||this.parent.parentNode.align=="center"||Ay.tagName=="CENTER"||this.parent.parentNode=="CENTER")){if(Az.src!=null){Az.style.right=(this.width/2)-(parseInt(Az.style.width)+4)+"px"}else{Az.style.right=(this.width/2)-(parseInt(Az.style.width))+"px"}}else{Az.style.left=A0+"px"}}Az.style.top=A1+"px"}},setLogoPlacement:function(Ax,Ay){var Az=this.logos[Ax];if(Az){Az.corner=Ay.mapCorner;Az.offset={x:Ay.offsetSize.width,y:Ay.offsetSize.height};this._updateLogoPositions()}},layerTilesLoaded:function(Ax){var Az=this,Ay,A0=true,A1=new v("MQA.TileMap.tilesloaded",Az);A1.tileLayer=Ax.srcObject;T.trigger(Az,"tilesloaded",A1);for(Ay=0;Ay<Az._tileLayers.length;Ay++){A0=A0&&Az._tileLayers[Ay].tileLayer.tilesLoaded}if(A0){T.trigger(Az,"alltilesloaded",new v("MQA.TileMap.alltilesloaded",Az))}},addTileLayer:function(Ax){var Ay=this,Az=Ay._findTileLayer(Ax);if(Az<0){Ax.attach(Ay.display);Ay._tileLayers.push({tileLayer:Ax,refCnt:1})}else{Ay._tileLayers[Az].refCnt+=1}T.addListener(Ax,"alltilesloaded",Ay.layerTilesLoaded,Ay)},removeTileLayer:function(Ax){var Az=this,A0=Az._findTileLayer(Ax),Ay;if(A0<0){return }Ay=Az._tileLayers[A0];Ay.refCnt--;if(Ay.refCnt<=0){this._tileLayers.removeAt(A0);Ay.tileLayer.detach()}T.removeListener(Ax,"alltilesloaded",Az.layerTilesLoaded,Az)},_findTileLayer:function(Ay){var Ax=this._tileLayers,Az;for(Az=0;Az<Ax.length;Az++){if(Ax[Az].tileLayer===Ay){return Az}}return -1},handleClickEvent:function(A0,Ax){var Ay=this,Az=new v("MQA.TileMap.click");Az.srcObject=Ay;Az.xy={x:A0,y:Ax};Az.ll=Ay.pixToLL(Az.xy);Ay.onClick(Az)},handleRightClickEvent:function(Ay){var A0=this,A1=new v("MQA.TileMap.rightClick"),Ax=A0.display,Az=Ax.ancestorEventCoords(Ay);A1.srcObject=A0;A1.xy=Az.screen;A1.ll=Az.latLng;A0.onRightClick(A1)},handleDblClickEvent:function(A2,Ax){var A0=this,A1=new v("MQA.TileMap.dblClick"),Az=A0.getZoomLevel(),Ay=A0.pixToLL({x:A2,y:Ax});A1.srcObject=A0;A1.zoomLevel=Az;A1.ll=Ay;A0.onDoubleClick(A1);if(!A0.zoomOnDoubleClick){return }if(Az<J.MAXZOOM){Az+=1}A0.setCenterAnimate(Ay,Az)},setMapType:function(Ax){var A0=this,Ay=A0._currentMapType,A1,A2,Az;for(Az=0;Az<A0._mapTypes.length;Az++){if(Ax==A0._mapTypes[Az].id){A1=A0._mapTypes[Az]}}if(!A1||A1===A0._currentMapType){return }A0._currentMapType=A1;A0.mapType=A1.id;A1.activate(A0);if(Ay){Ay.deactivate(A0)}A2=new v("MQA.TileMap.mapTypeChanged");A2.prevMapType=Ay?Ay.id:"";A2.mapType=A0.mapType;A0.onMapTypeChanged(A2)},getMapType:function(){return this.mapType},getMapTypes:function(){return this._mapTypes},getCurrentMapType:function(){return this._currentMapType},addMapType:function(Ax){this._mapTypes.push(Ax)},removeMapType:function(Ax){var Ay=this;if(Ay._currentMapType===Ax){Ay.setMapType(null)}Ay._mapTypes.removeAll(function(Az){return Az===Ax})},getResolution:function(){return this.display.defaultDisplayProjection.resolution},getScale:function(){return Math.floor(this.getResolution()*39.37*72)},getBounds:function(Az,A1){var A0=this,Ay=A0.getSize(),A2=Az?Az:0,A3=A1?A1:0,Ax=A0.pixToLL(new J.Point(0+A2,0+A3)),A4=A0.pixToLL(new J.Point(Ay.width-A2,Ay.height-A3));return new J.RectLL(Ax,A4)},pixToLL:function(Az){var Ay=this.display,Ax=Ay.transform.displayToLatLng(Ay.ulX+Az.x,Ay.ulY+Az.y);return new J.LatLng(Ax.lat,Ax.lng)},llToPix:function(Ax){var Ay=this.display,Az=Ay.transform.latLngToDisplay(Ax.lat,Ax.lng);return new J.Point(Az.x-Ay.ulX,Az.y-Ay.ulY)},llToDisplay:function(Ax){return this.display.transform.latLngToDisplay(Ax.lat,Ax.lng)},pixToDisplay:function(Ay){var Ax=this.display;return new J.PointXY(Ax.ulX+Ay.x,Ax.ulY+Ay.y)},getDragOffset:function(){var Ax=this.display;return new J.Point(Ax.ulX,Ax.ulY)},getSize:function(){return new J.Size(this.width,this.height)},saveState:function(){var Ax=this;Ax.savedCenter=Ax.getCenter();Ax.savedZoomLevel=Ax.getZoomLevel();Ax.savedMapType=Ax.getMapType()},restoreState:function(){var Ax=this;Ax.setCenter(Ax.savedCenter);Ax.setZoomLevel(Ax.savedZoomLevel);Ax.setMapType(Ax.savedMapType)},setSize:function(Ax){var Az=this,A2=Az.parent,A3=Az.display,A8=A2.parentNode,A5=A2.parentNode.style,A7,A0,A4,A6,A9,Ay,A1;A3.cancelDrag();if(A5&&A5.borderWidth){if(parseInt(A5.borderWidth.replace("px",""))>0&&A8&&A8.style){A8.style.overflow="hidden"}}if(Ax){A7=Ax.width;A0=Ax.height}else{A7=O(A8,true);A0=AB(A8,true)}if(A7<0||A0<0){return }A4=(A3.ulX+A3.width/2);A6=(A3.ulY+A3.height/2);Az.width=A7;Az.height=A0;A3.width=A7;A3.height=A0;A2.style.width=A7+"px";A2.style.height=A0+"px";A9=A4-A7/2;Ay=A6-A0/2;A3.setViewport(A9,Ay,A7,A0);Az._updateLogoPositions();Az._placeControlAnchors();A1=new v("MQA.TileMap.sizeChanged");A1.width=A7;A1.height=A0;Az.onSizeChanged(A1)}});l(Aj.prototype);function At(Ay){var Ax=Ay.toLowerCase();return function(Az){c(this,Ax,Az)}}function As(Ax,Ay){for(var Az=0;Az<Ay.length;Az++){Ax["on"+Ay[Az]]=At(Ay[Az])}}As(Aj.prototype,["MapInit","LayerDrawn","LayerAdded","LayerRemoved","Click","DoubleClick","RightClick","ZoomStart","ZoomEnd","MapTypeChanged","ShapeAdded","ShapeRemoved","MapCleared","InfoWindowOpen","InfoWindowClose","MoveStart","Move","MoveEnd","DragStart","Drag","DragEnd","TKMouseDown","TKMouseUp","SizeChanged"]);J.TileMap=Aj})();var Ab;(function(){function Ax(Ay){var Az=new v("MQA.TileMap.zoomStart");Az.zoom=Ay.getZoomLevel();Ay.onZoomStart(Az)}function Av(Ay,Az){var A0=new v("MQA.TileMap.zoomEnd");A0.prevZoom=Az;A0.zoom=Ay.getZoomLevel();Ay.onZoomEnd(A0)}function At(Az,Ay){var A1=Az.getZoomLevel(),A0;Ax(Az);A0=Ay.call(Az);Av(Az,A1);return A0}function Aw(Ay,Az){var A0=new v();A0.eventName="MQA.TileMap."+Az.toLowerCase();Ay["on"+Az].call(Ay,A0)}function Au(Az){var BD,A5=Az.display,BA,BF,BE,A0,A9,Ay,BH,A3,BG,BB,A8,A6,A4;function BC(){BH=null;var BM=A1(),BN=(BM-BA)/(BF-BA)+(1/A4),BK,BO,BL;if(BN<0||BN>1){A7();return }if(!A3&&BG){BO=Ay.lat+(A8.lat-Ay.lat)*BN;BL=Ay.lng+(A8.lng-Ay.lng)*BN;var BJ=A5.transform.latLngToDisplay(BO,BL);A5.setViewport(BJ.x-A5.width/2,BJ.y-A5.height/2);var BI=Az.getCenter()}else{BK=A0+(A9-A0)*BN;if(BG){BO=Ay.lat+(A8.lat-Ay.lat)*BN;BL=Ay.lng+(A8.lng-Ay.lng)*BN}else{BO=Ay.lat;BL=Ay.lng}A5.initTransform(BB,BK,BO,BL,A5.width,A5.height);Az.scale=BK;Az.zoom=BB}A2()}function A7(){J.Log.debug("finish animation");BD=false;BH=null;var BK=Az.getCenter(),BL=Az.scale;A5.endAnimate();if((A9&&A9!=Az.scale)||(A8&&A8!=Ay)){if(!BB||!A9||A9==BL){var BJ=A5.transform.latLngToDisplay(A8.lat,A8.lng);A5.setViewport(BJ.x-A5.width/2,BJ.y-A5.height/2)}else{var BI=A8;if(!BI){BI=Az.getCenter()}Az.resolution=Ak[BB];A5.initTransform(BB,A9,BI.lat,BI.lng,A5.width,A5.height)}}if(BG){Aw(Az,"MoveEnd")}if(A3){Av(Az,BE)}}function A2(){var BI=A1(),BJ;if(BI>=BF){A7()}else{BJ=(BF-BA)/A4;if((BI+BJ)>BF){BJ=BF-BI}BH=setTimeout(BC,5)}}function A1(){return new Date().getTime()}this.start=function(BM,BI,BL,BK){BB=BM;A8=BI;A6=BL;A4=BK;A0=A5.defaultDisplayProjection.resolution;BE=Az.getZoomLevel();if(BB){A9=Ak[BB]}else{A9=A0}if(A9!=A0){A3=true}Ay=Az.getCenter();if(!A8){A8=Ay}if(A8!=Ay){BG=true}var BJ=A8?A8:Ay;if(!A6){A6=0}if(!A4){A4=5}BA=A1();BF=BA+A6;if(!BD){if(BG){Aw(Az,"MoveStart")}if(A3){Ax(Az)}BD=true;A5.beginAnimate(BB,A9,BJ.lat,BJ.lng,Az.width,Az.height);BC()}else{if(BH){clearTimeout(BH)}BH=null;BD=true;BC()}};this.stop=function(){if(BH){clearTimeout(BH)}BH=null;if(BD){A7()}}}Ab=function(Ay){this.startedToDrag=false;this.map=Ay};Ab.prototype={dragStart:function(){var Ay=this.map;Ay.parent.style.cursor=Ay._grabbing_mousecursor},dragMove:function(){var A0=this,Ay=A0.map,Az=Ay.display,A1=A0.dragXY.x-A0.startXY.x,A2=A0.dragXY.y-A0.startXY.y;if(!A0.startedToDrag){Aw(Ay,"DragStart");Aw(Ay,"MoveStart");A0.startedToDrag=true}Az.setViewport(Az.ulX-A1,Az.ulY-A2);Aw(Ay,"Drag");Aw(Ay,"Move")},dragEnd:function(A0){var A1=this,Az=A1.map,Ay=Ae(A0);if(A1.startedToDrag){A1.dragCancelled();return }if(typeof Az.clickCnt==="undefined"||Az.clickCnt===null){Az.clickCnt=0}if(!Az.clickXY){Az.clickXY={x:(A1.startXY.x-Az.display.ulX),y:(A1.startXY.y-Az.display.ulY)}}Az.clickCnt++;if(Az.clickCnt>1){if(Az.clickTimeout){clearTimeout(Az.clickTimeout);Az.clickTimeout=null}Az.clickCnt=0}if(Az.clickCnt==1&&!Az.clickTimeout){Az.clickTimeout=setTimeout(function(){Az.clickCnt=0;Az.clickTimeout=null;if(Ay){Az.handleRightClickEvent(Az.clickXY.x,Az.clickXY.y)}else{Az.handleClickEvent(Az.clickXY.x,Az.clickXY.y)}delete Az.clickXY},300)}A1.dragCancelled()},dragCancelled:function(){var Az=this,Ay=Az.map;Ay.parent.style.cursor=Ay._grab_mousecursor;if(Az.startedToDrag){Aw(Ay,"DragEnd");Aw(Ay,"MoveEnd")}},doubleClick:function(){var Ay=this.map;if(Ay.clickTimeout){clearTimeout(Ay.clickTimeout)}Ay.clickCnt=0;Ay.clickTimeout=null;Ay.handleDblClickEvent(Ay.clickXY.x,Ay.clickXY.y);delete Ay.clickXY}};function As(Az,Ay){return function(A1){var A2=this,A0=A2.display;A1=A1||100;A2.slideMapToPoint(A0.width/2+Az*A0.width*A1/100,A0.height/2+Ay*A0.height*A1/100)}}o(Aj.prototype,{getZoomLevel:function(){return this.zoom},setZoomLevel:function(Ay){var A0=this,Az=A0.getCenter();Ay=AI(Ay);if(A0.zoom===Ay){return }A0.zoom=Ay;A0.resolution=Ak[Ay];At(A0,function(){this.display.initTransform(this.zoom,this.resolution,Az.lat,Az.lng,this.width,this.height)});A0._updateLogoPositions()},setZoomLevelAnimate:function(Ay,Az){var A0=this;Ay=AI(Ay);if(Ay===A0.zoom){return }A0.setCenterAnimate(null,Ay,Az)},getCenter:function(){var Az=this.display,A1=(Az.width/2)+Az.ulX,Ay=(Az.height/2)+Az.ulY,A0=Az.transform.displayToLatLng(A1,Ay);return new J.LatLng(A0.lat,A0.lng)},getCenterOffset:function(A1,A8){var Az=this,A4=Ak[A8],A2=Az.pixToLL(A1),A6,Ay=Az.display.transform,A9,A3=new b(P),A0,A5=A1.x-Az.width/2,A7=A1.y-Az.height/2;if(!A4){A4=Az.resolution}A3.setResolution(A4);A0=A3.forwardGlobal([A2.lng,A2.lat]);A9=new Ad([A2.lng,A2.lat],A8,A4,A3,A0);A6=A9.displayToLatLng(-A5,-A7);return A6},setCenter:function(Ay,Az){var A1=this,A0=A1.display;if(Az&&Az!=A1.zoom){A1.zoom=Az;A1.resolution=Ak[Az];At(A1,function(){J.Log.debug("setCenter->dsp.initTransform");A0.initTransform(this.zoom,this.resolution,Ay.lat,Ay.lng,this.width,this.height)});A1._updateLogoPositions()}else{var A2=A0.transform.latLngToDisplay(Ay.lat,Ay.lng);Aw(A1,"MoveStart");A0.setViewport(A2.x-A0.width/2,A2.y-A0.height/2);Aw(A1,"MoveEnd")}},setCenterAnimate:function(Az,Ay,A0){A0=A0||{};Ay=AI(Ay);var A1=this,A2=new Au(A1);if(Ay===A1.zoom){Ay=null}A2.start(Ay,Az,A0.totalMs||500,A0.steps||5)},slideMapToPoint:function(A1,A4){if(typeof A1==="object"){A4=A1.y;A1=A1.x}var Ay=this,A5=Ay.display;if(Ay._slideKey){clearTimeout(Ay._slideKey)}Ay._slideKey=null;A1+=A5.ulX;A4+=A5.ulY;var A2=(A5.ulX+A5.width/2),A3=(A5.ulY+A5.height/2),A8=A1-A2,A7=A4-A3,Az=A5.ulX+A8,A0=A5.ulY+A7,A6=(function(A9,BA){var BB=function(BF,BC,BD,BE){return BF+BC/2*(((BD/=BE/2)<1)?(BD*BD*BD):((BD-=2)*BD*BD+2))};return function(BC,BD){return[BB(A9[0],BA[0],BC,BD),BB(A9[1],BA[1],BC,BD)]}})([A5.ulX,A5.ulY],[A8,A7]);Aw(Ay,"MoveStart");Ay._doSlide(Az,A0,A8/J.SLIDESTEPS,A7/J.SLIDESTEPS,J.SLIDESTEPS,A6,0,2*J.SLIDESTEPS*J.SLIDEDELAY)},_doSlide:function(Ay,A0,A5,A6,A2,A3,A7,A1){var Az=this,A4=Az.display;if(A3){var A8=A3(A7,A1);A4.setViewport(A8[0],A8[1]);Aw(Az,"Move");if(A7>=A1){Az._slideKey=null;A4.setViewport(Ay,A0);Aw(Az,"MoveEnd")}else{Az._slideKey=setTimeout(An(Az,"_doSlide",Ay,A0,A5,A6,A2-1,A3,A7+J.SLIDEDELAY,A1),J.SLIDEDELAY)}}else{A4.setViewport(A4.ulX+A5,A4.ulY+A6);Aw(Az,"Move");if(A2===0){Az._slideKey=null;A4.setViewport(Ay,A0);Aw(Az,"MoveEnd")}else{Az._slideKey=setTimeout(An(Az,"_doSlide",Ay,A0,A5,A6,A2-1,null,null,null),J.SLIDEDELAY)}}},panNorth:As(0,-1),panSouth:As(0,1),panEast:As(1,0),panWest:As(-1,0),panNorthWest:As(-1,-1),panSouthWest:As(-1,1),panNorthEast:As(1,-1),panSouthEast:As(1,1)})})();(function(){function At(Av,BA,Aw,A7,A2){var Ax=Av.width,Ay=Av.height,A3=Av.bestFitMargin||0,Au=new b(P),A8=A2,A1,A4,A5,BB,Az,A0,A6,A9;if(typeof Aw==="undefined"||Aw===null){Aw=false}if(Aw){A4=Av.getCenter()}else{A4={lat:BA.ul.lat-(BA.ul.lat-BA.lr.lat)/2,lng:BA.ul.lng-(BA.ul.lng-BA.lr.lng)/2}}while(A8>A7){A1=Ak[A8];Au.setResolution(A1);BB=Au.forwardGlobal([A4.lng,A4.lat]);A5=new Ad([A4.lng,A4.lat],A8,A1,Au,BB);Az=A5.latLngToDisplay(BA.ul.lat,BA.ul.lng);A0=A5.latLngToDisplay(BA.lr.lat,BA.lr.lng);A6=Math.abs(Az.x-A0.x)+A3;A9=Math.abs(Az.y-A0.y)+A3;if(A6<=Ax&&A9<=Ay){break}A8--}return[A4,A8]}function As(Av){var Az=Av.getShapeCollections(true);var Au=new J.ShapeCollection;var A2=Az.length;for(var Ax=0;Ax<A2;Ax++){var Ay=Az[Ax];if(Ay.visible&&Ay.bestFit&&Ay.getBoundingRect()!=null){var A1=Ay.getSize();for(var A0=0;A0<A1;A0++){var Aw=Ay.getAt(A0);if(Aw.visible){Au.add(Aw,false)}}}}return Au}o(Aj.prototype,{getNewCenterZoom:function(Au){return At(this,Au,false,J.MINZOOM,J.MAXZOOM)},zoomToRect:function(Aw,Av,Au,Ay){var Ax=At(this,Aw,Av,Au||J.MINZOOM,Ay||J.MAXZOOM);this.setCenter(Ax[0],Ax[1])},bestFit:function(A1,Az,Au){var Ay=As(this).getBoundingRect();var A0=0;var A2=0;if(!Ay){return }this.zoomToRect(Ay,A1,Az||J.MINZOOM,Au||J.MAXZOOM);var Av=this.parent.parentNode.parentNode;if(Av!=null){if(J.browser.name=="msie"&&(Av.align=="center"||this.parent.parentNode.align=="center"||Av.tagName=="CENTER"||this.parent.parentNode=="CENTER")){var Aw=0,Ax=(-1)*(self.map.display.height/2);self.map.display.setViewport(Aw,Ax)}}}})})();var I;(function(){var Av=["div",[0,"div#m.scale_bar",[0,"div#mText.scale_text",[],0],0,"div#k.scale_bar",[0,"div#kText.scale_text",[],0],0]],As=[1,2,5,10,20,50,100,200,500,1000,2000,5000],At=Math.PI/180;J.Loader.prependCss(".scale_bar{background-color:#fff; border:1px solid #000; position:absolute; overflow:hidden; height: 10px; opacity:0.75; -moz-border-radius:2px; -webkit-border-radius:2px;}.scale_text{position:relative; left:3px; top:-1px; overflow:hidden; color:#000; font-family:Arial,sans-serif; font-size:10px;}");function Au(A4,A1,A6,A0,A2){var A5=Ak[A6+1],A7=100,A8=A5*A7,Ax="m",Ay,Aw=19720821,Az,A3;if(A2=="k"){if(A8>=5000){Ax="km";A8*=0.001}}else{Ax="ft";A8*=3.2808399;if(A8>=10000){Ax="mi";A8/=5280}}A8*=(1/Math.cos(A0));Ay=A8;for(A3=0;A3<As.length;A3++){Az=Math.abs(A8-As[A3])/A8;if(Az<Aw){Aw=Az;Ay=As[A3]}}A7*=Ay/A8;A8=Math.round(Ay);A4.style.width=A7+"px";A4.width=A7;A1.innerHTML=A8+Ax}I=function(){var Ax=this,Aw=Ar(Av),Ay=Aw.root;Ax.html=Aw;Ax.elt=Aw.root;Ay.corner=J.CORNER_BOTTOMLEFT;Ay.offset={x:76,y:7};Ay.style.position="absolute";Ay.style.display="block";Ay.style.overflow="hidden";Ay.width=150;Ay.height=27;Ay.style.width="150px";Ay.style.height="26px";Aw.m.height=10;Aw.m.style.marginBottom="1px";Aw.k.height=10;Aw.k.style.marginBottom="1px";Aw.k.style.marginTop="13px"};I.prototype={update:function(A0,Ax){var Az=this,Ay=Az.html,Aw=A0.lat;Aw=Math.abs(Aw);Aw=Math.min(Aw,85);Aw*=At;Au(Ay.m,Ay.mText,Ax,Aw,"m");Au(Ay.k,Ay.kText,Ax,Aw,"k")}};AU(Aj.prototype,{onZoomEnd$After:function(){var Aw=this,Ax=Aw.scaleBar;if(Ax){Ax.update(Aw.getCenter(),Aw.getZoomLevel())}},onMoveEnd$After:function(){var Aw=this,Ax=Aw.scaleBar;if(Ax){Ax.update(Aw.getCenter(),Aw.getZoomLevel())}}})})();var AN;J.Loader.prependCss(".mqacopyright{font-family:sans-serif;font-size:9px;white-space:nowrap;} .mqacopyrightlight{color:white;font-weight:bold;} .mqacopyrightdark{color:black;font-weight:bold;} .mqacopyright .mqacopyswitch{display:none;} .mqacopyrightlight .mqacopyswitchlight{display:inline;} .mqacopyrightdark .mqacopyswitchdark{display:inline;}");(function(){var At={"":1,"Map Data":2,Imagery:3};function Av(A1,A3){var Ay=A1[1],Az=A3[1],Aw=Ay.group,Ax=Az.group,A0=String(Ay.html||Ay.text||""),A2=String(Az.html||Az.text||"");Aw=String(At[Aw]||Aw);Ax=String(At[Ax]||Ax);if(Aw==Ax){if(A0==A2){return 0}else{if(A0<A2){return -1}else{return 1}}}else{if(Aw<Ax){return -1}else{return 1}}}function As(Aw){return Aw.replace(/\<|\>\|\&/g,function(Ax){return ;(Ax=="<"&&"&lt;")||(Ax==">"&&"&gt;")||(Ax=="&"&&"&amp;")})}function Au(Aw){var Ax=AK("");return Aw.replace(/\%TK\%/g,Ax)}AN=function(Ay,Aw){this.map=Aw;var Ax=document.createElement("div");Ax.className="mqacopyright";Ax.style.position="absolute";Ax.style.bottom="0px";Ax.style.right="5px";Ax.style.textAlign="right";AY(Ax);if(Ay){Ay.appendChild(Ax)}this.elt=Ax;this.list=[];this.invalidate()};AN.prototype={getPreamble:function(){return"&nbsp;&nbsp;-&nbsp;&nbsp;Some data&nbsp;&copy;"+(new Date().getFullYear())+"&nbsp;"},setClass:function(Aw){this.elt.className="mqacopyright "+Aw},set:function(Aw,A0){var A1,Ax=this.list,Az,Ay=false;if(!A0){for(A1=0;A1<Ax.length;A1++){Az=Ax[A1];if(Az&&Az[0]==Aw){Ax[A1]=null;this.invalidate();return }}}else{Ax.push([Aw,A0]);this.invalidate()}},invalidate:function(){if(this._refreshKey){return }var Aw=this;this._refreshKey=setTimeout(function(){Aw.refresh()},0)},refresh:function(){this._refreshKey=null;var A6,A4=[],A1,Ay=this.list,Aw,A5=["&copy;"+(new Date().getFullYear())+"&nbsp;MapQuest"],Az=null,Ax,A0,A2={},A3=window.location.hostname.match(/.ca$/)?"http://info.mapquest.com/mapquest-terms-of-use-ca-en/":"http://www.mapquest.com/terms-of-use";for(A1=0;A1<Ay.length;A1++){Aw=Ay[A1];if(Aw){A4.push(Aw)}}A4.sort(Av);this.list=A4;for(A1=0;A1<A4.length;A1++){A6=A4[A1][0];Aw=A4[A1][1];if(Aw!=undefined&&(Aw.text!=""||Aw.html!="")&&A1==0){A5.push(this.getPreamble())}if(!Aw||A2[A6]){continue}A2[A6]=true;if(A1>0){A5.push(",&nbsp;")}if(Aw.html){A5.push(Au(Aw.html))}else{if(Aw.text){A5.push(As(Aw.text))}}}termsHTML='<a id="terms" class="termsLink" target="_blank" href="'+A3+'">Terms</a>';if(this.map&&this.map.width&&this.map.width>=J.SM_VIEWPORT){A5.push(" | "+termsHTML)}else{A5=[termsHTML]}A0=A5.join("");if(A0!=this._curHtml){this.elt.innerHTML=A0;this._curHtml=A0}}};AU(Aj.prototype,{onMapInit$After:function(){var Aw=this._createControlAnchor(3,this.display.zlevel("logo",true));this.copyright=new AN(Aw,this);this._updateCopyrightStyle()},_updateCopyrightStyle:function(){var Ax=this.mapType,Aw="mqacopyrightdark";if(Ax=="hyb"||Ax=="sat"){Aw="mqacopyrightlight"}this.copyright.setClass(Aw)},onMapTypeChanged$After:function(){if(this.copyright){this._updateCopyrightStyle()}}})})();var AH;(function(){var Au={},At=window.COVSERVER||window.LOGSERVER;function Av(Ax,Az){if(!At){return }var A0=Au[Ax];if(A0&&A0.time<(new Date().getTime()-30000)){if(A0.scriptElt&&A0.scriptElt.parentNode){A0.scriptElt.parentNode.removeChild(A0.scriptElt)}A0=null}if(!A0){A0=[Az];Au[Ax]=A0;A0.time=new Date().getTime();var A1=At+"/coverage?"+Ax,Ay;Ay=document.createElement("script");Ay.setAttribute("src",A1);A0.scriptElt=Ay;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(Ay)}else{A0.push(Az)}}J._covCallback=function(Ay,Ax){var Az=Au[Ax],A0;delete Au[Ax];if(!Az){return }for(A0=0;A0<Az.length;A0++){Az[A0]._handleCoverageData(Ay,Ax)}setTimeout(function(){if(Az.scriptElt&&Az.scriptElt.parentNode){Az.scriptElt.parentNode.removeChild(Az.scriptElt)}},0)};function Aw(Az,Ax){var Ay;for(Ay=0;Ay<Az.length;Ay++){Az[Ay]=parseFloat(Az[Ay].toFixed(2))}return Az}AH=function(A7){var A4=this,BC,Ax,Ay,A1,Az,BD=[],A2,A9={},A3={};function A6(){if(A2){return }A2=setTimeout(A5,0)}function A5(){A2=null;Ax=Aw(A1,Az);BC=Az;var BE="format=json&jsonp=MQA._covCallback&loc="+Ax.join(",")+"&zoom="+BC+"&projection=sm&cat="+encodeURIComponent(BD.join(","));if(BE==Ay){J.Log.debug("Not requesting duplicate coverage: "+BE);return }Ay=BE;Av(BE,A4)}function A0(BF,BE){var BH=A9[BF],BG=A3[BF];if(BH){if(BG){A8(BG);BG.features=null}}A9[BF]=BE;if(BE&&BG){BG.features=BE;BA(BG)}}function BB(BK,BF){var BE={},BH,BI=BK.featureIds,BG=BK.features,BJ;for(BH=0;BI.length;BH++){BE[BI[BH]]=true}if(BG){for(BH=0;BH<BG.length;BH++){BJ=BG[BH];if(!BJ.opt||BE[BJ.id]){BF(BJ)}}}}function BA(BE){BB(BE,function(BG){var BH=BG.copyrights,BF,BI;if(BH){for(BI=0;BI<BH.length;BI++){BF=BH[BI];if(BF.html){if(MQPROTOCOL=="https://"){BF.html=BF.html.replace("http://tile21.mqcdn.com/res/",MQCDN+"images/")}}A7.set(BF.id,BF)}}})}function A8(BE){BB(BE,function(BG){var BH=BG.copyrights,BF,BI;if(BH){for(BI=0;BI<BH.length;BI++){BF=BH[BI];A7.set(BF.id)}}})}this.subscribe=function(){for(var BE=0;BE<arguments.length;BE++){BD.push(String(arguments[BE]))}A6()};this.activate=function(BF){var BE=[],BH,BG;BG=A3[BF];if(BG){A8(BG)}for(BH=1;BH<arguments.length;BH++){BE.push(arguments[BH])}BG={featureIds:BE,features:A9[BF]};A3[BF]=BG;BA(BG)};this.deactivate=function(){var BE,BF,BG;for(BE=0;BE<arguments.length;BE++){BG=arguments[BE];BF=A3[BG];if(BF){delete A3[BG];A8(BF)}}};this.updateBox=function(BF,BE){A1=BF;Az=BE;if(Az!=BC||!Ax||(A1[0]<Ax[0]||A1[1]<Ax[1]||A1[2]>Ax[2]||A1[3]>Ax[3])){A6()}};this._handleCoverageData=function(BG,BF){if(BF!=Ay){return }var BH,BE;for(BH in BG){BE=BG[BH];if(typeof BE=="object"&&BE instanceof Array){A0(BH,BE)}}for(BH in A9){BE=BG[BH];if(typeof BE=="object"&&BE instanceof Array&&!BG[BH]){A0(BH)}}}};function As(Ay){var Az=Ay.coverage;if(!Az){return }At=COVSERVER;var A1=Ay.mapType,A2=Az._curMapType;if(A1!=Az._curMapType){Az.deactivate(A2);Az.activate(A1);Az._curMapType=A1}var A0=Ay.getBounds(),Ax;if(A0.ul.lng>0&&A0.lr.lng<0){if((A0.ul.lng+A0.lr.lng)>0){A0.ul.lng-=360}else{A0.lr.lng+=360}}Ax=[Math.min(A0.ul.lng,A0.lr.lng),Math.min(A0.ul.lat,A0.lr.lat),Math.max(A0.ul.lng,A0.lr.lng),Math.max(A0.ul.lat,A0.lr.lat)];Az.updateBox(Ax,Ay.getZoomLevel())}AU(Aj.prototype,{onMapInit$After:function(){var Ay=this.copyright,Ax=new AH(Ay);Ax.subscribe("map","hyb","sat");this.coverage=Ax;As(this)},onMapTypeChanged$After:function(){As(this)},onMoveEnd$After:function(){As(this)},onZoomEnd$After:function(){As(this)}})})();(function(){var At=window.MQA;function Au(Av,Aw){var Ax=Aw?s(Aw):"";return"w:"+Ax+":"+Av}function As(Av){this.map=Av;this.registry={};var Ax=document.createElement("div");Ax.style.position="absolute";Ax.style.zIndex="1000";Ax.style.left="0px";Ax.style.top="0px";Av.display.zlevel("window",true).appendChild(Ax);this.screenSurface=Ax;var Aw=document.createElement("div");Aw.style.position="absolute";Aw.style.zIndex="1000";Av.display.zlevel("window").appendChild(Aw);this.globalSurface=Aw;Av.display.addLayer("global-window",this)}As.prototype={resetTransform:function(Av){this.each(function(Aw){if(Aw.resetTransform){Aw.resetTransform(Av)}})},each:function(Av){var Ax,Ay=this.registry,Aw;for(Ax in Ay){if(Ax.match(/^w\:/)){Aw=Av(Ay[Ax]);if(Aw){return Aw}}}},open:function(Av,Aw,Ax){var A0=this.registry,Az=Au(Av,Aw),Ay=A0[Az];this.close(Aw,Av);Ax.opener=Aw;Ax.id=Av;A0[Az]=Ax;if(Ax.resetTransform){Ax.resetTransform(this.map.display.transform)}Ax.onOpen(this);if(Aw&&Aw.onWindowOpen){Aw.onWindowOpen(Ax)}},find:function(Av,Aw){return this.registry[Au(Av,Aw)]},close:function(Av,Aw){var Az=this.registry,Ay=Au(Av,Aw),Ax=Az[Ay];if(Ax){if(Aw&&Aw.onWindowClose){Aw.onWindowClose(Ax)}Ax.dispose();delete Az[Ay]}},closeAll:function(Av,Aw){var Ax=this;this.each(function(Ay){if((Av&&Av!=Ay.id)||(Aw&&Aw!==Ay.opener)){return }Ax.close(Ay.id,Ay.opener)})}};AU(At.TileMap.prototype,{onMapInit$After:function(){this.windowManager=new As(this)}});At.WindowManager=As})();var AW;(function(){var Az=window.MQA;function Av(){this.items=[];this.guid=Az.Util._getRandomGUID(10);this.collectionName="";this.bestFit=true;this.setName=function(A7){this.collectionName=A7};this.getName=function(){return this.collectionName};this.add=function(A7){var A8=this.items.length;this.items.push(A7);if(this._onAdd){this._onAdd(A7,A8)}return A8+1};this.getSize=function(){return this.items.length};this.getAt=function(A7){return this.items[A7]};this.remove=function(A8){var A9=this.items,A7;A7=A9.splice(A8,1);if(A7.length&&A7.length>0){A7=A7[0]}else{A7=null}if(this._onRemove&&A7){this._onRemove(A7)}return A7};this.removeAll=function(){var A8=this.items;this.items=[];if(this._onRemove){for(var A7=0;A7<A8.length;A7++){this._onRemove(A8[A7])}}};this.contains=function(A7){var A9=this.items,A8;for(A8=0;A8<A9.length;A8++){if(A9[A8]===A7){return true}}return false};this.getById=function(A8){var BA,A7=this.items.length,A9;for(BA=0;BA<A7;BA++){A9=this.items[BA];if(A9.id&&A9.id===A8){return A9}}return null};this.removeItem=function(A7){var A9=this.items,A8;for(A8=0;A8<A9.length;A8++){if(A9[A8]===A7){this.remove(A8);return }}};this.append=function(A7){for(var A8=0;A8<A7.getSize();A8++){this.add(A7.getAt(A8))}};this.getItemIndex=function(A7){var A9=this.items,A8;for(A8=0;A8<A9.length;A8++){if(A9[A8]===A7){return A8}}return false}}function Au(A7,A8){this.ul=A7?new Az.LatLng(A7.lat,A7.lng):new Az.PointLL(0,0);this.lr=A8?new Az.LatLng(A8.lat,A8.lng):new Az.PointLL(0,0);this.extend=function(A9){var BA=this.ul,BB=this.lr;if(A9.lat>BA.lat){BA.lat=A9.lat}if(A9.lng<BA.lng){BA.lng=A9.lng}if(A9.lat<BB.lat){BB.lat=A9.lat}if(A9.lng>BB.lng){BB.lng=A9.lng}};this.contains=function(A9){return A9&&A9.ul&&A9.lr&&this.ul.lat>A9.ul.lat&&this.lr.lat<A9.lr.lat&&this.ul.lng<A9.ul.lng&&this.lr.lng>A9.ul.lng}}function A2(){this.guid=Az.Util._getRandomGUID(10);this.className="MQA.base";this.reservedProperties="guid,className,parentCollections";this.parentCollections=[];this.setValue=function(A7,A8){if(typeof (this[A7])!="undefined"){if(this.reservedProperties.search(A7)!=-1){return false}this[A7]=A8;if(typeof (this[A7+"_override"])=="undefined"){this._facio(A7,this[A7])}this.facio(A7,this[A7]);return true}else{return false}};this.getValue=function(A7){var A8;if(typeof (this[A7])!="undefined"){A8=this.duco(A7);if(typeof (A8)=="undefined"){A8=this._duco(A7);if(typeof (A8)=="undefined"){A8=this[A7]}}return A8}};this.setValues=function(A8){var A7=0;for(var A9 in A8){if(typeof (this[A9])!="undefined"){if(this.setValue(A9,A8[A9])){A7++}}}return A7};this.override=function(A7){if(!(A7 instanceof Array)){A7=[A7]}for(var A8=0;A8<A7.length;A8++){this[A7[A8]+"_override"]=1}};this._facio=function(A8,A7){};this.facio=function(A8,A7){};this._duco=function(A7){};this.duco=function(A7){};this.draw=function(){};this.dispose=function(){}}function A6(A7){return(typeof (A7)=="function")?A7:undefined}function Aw(A7,A9){var A8=A9.substring(0,1).toUpperCase()+A9.substring(1);return A6(A7["get"+A8])||A6(A7["is"+A8])||function(){return A7[A9]}}function A0(A7,A9,BA){var A8=A9.substring(0,1).toUpperCase()+A9.substring(1);return A6(A7["set"+A8])||(!BA&&function(BB){return A7[A9]=BB})}var At={setValue:function(A7,A8){A0(this,A7).call(this,A8)},getValue:function(A7){return Aw(this,A7).call(this)},setValues:function(A9){var BB={},BA,A8,A7=0;for(BA in A9){if(BB[BA]){continue}A8=A0(this,BA,true);if(A8){A8.call(this,A9[BA]);A7++}}return A7},dispose:function(){},defineProperty:function(BG,BF,A9,A7){var BA=BG.substring(0,1).toUpperCase()+BG.substring(1),BD="set"+BA,BE=function(BI){var BH=A7;if(BF&&BI!==null&&BI!==undefined){BI=BF(BI)}if(this[BG]!==BI){this[BG]=BI;if(typeof (BH)=="string"){BH=this[BH]}if(typeof (BH)=="function"){BH.call(this)}}},A8="get"+BA,BC="is"+BA,BB=function(){return this[BG]};if(!this[BD]){this[BD]=BE}if(!this[A8]){this[A8]=BB}if(BF===Boolean&&!this[BC]){this[BC]=BB}if(typeof (A9)!="undefined"){this[BG]=A9}}};function Ax(){}Ax.prototype=At;function A3(A7,A8){this.setLatLng(A7,A8)}A3.prototype={setLatitude:function(A7){this.lat=parseFloat(A7)},getLatitude:function(){return this.lat},setLongitude:function(A7){this.lng=parseFloat(A7)},getLongitude:function(){return this.lng},setLatLng:function(A7,A8){this.lat=parseFloat(A7);this.lng=parseFloat(A8)}};function A1(A8,A7){this.x=A8;this.y=A7}A1.prototype={setX:function(A7){this.x=A7},setY:function(A7){this.y=A7},getX:function(){return this.x},getY:function(){return this.y},setXY:function(A8,A7){this.x=A8;this.y=A7}};function A4(A8,A7){this.width=parseInt(A8||0);this.height=parseInt(A7||0)}A4.prototype={getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(A7){this.width=parseInt(A7)},setHeight:function(A7){this.height=parseInt(A7)},toString:function(){return this.width+","+this.height}};function Ay(A8,A7){if(A8==null){A8=Az.MapCorner.TOP_LEFT}if(A7==null){A7=new Az.Size(0,0)}this.mapCorner=A8;this.offsetSize=new Az.Size(A7.width,A7.height)}Ay.prototype={getMapCorner:function(){return this.mapCorner},getOffsetSize:function(){return new Az.Size(this.offsetSize.getWidth(),this.offsetSize.getHeight())}};function A5(A7){return function(A8,A9){this.x=A7(A8);this.y=A7(A9)}}function As(){var A7=document.createElement("img");A7.setAttribute("unselectable","on");A7.style.MozUserSelect="none";A7.style.display="block";A7.setAttribute("galleryimg","no");return A7}AW=Az.Icon=function(A9,A8,A7,BA){this.imageURL=A9;this.width=parseInt(A8);this.height=parseInt(A7);this.classAttr=BA};AW.prototype={createElement:function(){var A8,A9=this.imageURL,A7=this.width,BC=this.height,BA,BB=this.classAttr;if(A9){if(AD.ie6&&A9.indexOf(".png")>=0&&A7&&BC){A8=document.createElement("div");A8.style.width=A7+"px";A8.style.height=BC+"px";BA=document.createElement("v:image");BA.setAttribute("src",A9);BA.style.width=A7+"px";BA.style.height=BC+"px";A8.insertAdjacentElement("beforeEnd",BA)}else{A8=As();if(A7){A8.style.width=parseInt(A7,10)+"px"}if(BC){A8.style.height=parseInt(BC,10)+"px"}A8.src=A9}}else{A8=document.createElement("div")}if(BB){A8.setAttribute("class",BB)}return A8},clone:function(){return new Az.Icon(this.imageURL,this.width,this.height)}};Az.LatLng=A3;Az.Point=A1;Az.LatLngCollection=Av;Az.RectLL=Au;Az.Size=A4;Az.Component=Ax;Az.Base=A2;Az.MapCornerPlacement=Ay;Az.PointXY=A5(parseInt);Az.PointFloatXY=A5(parseFloat);Az.PointLL=A5(parseFloat);Az.TKObjectCollection=Av;Az.Icon=AW})();var G,AM;(function(){var At=1;AM=function(){J.TKObjectCollection.call(this);this.visible=true};AM.prototype={_onAdd:function(Ax){var Aw=this._peer;Ax.setVisible(this.getVisible());if(Aw){Aw.addShape(Ax)}},_onRemove:function(Ay){var Aw=this._peer,Ax=Ay.declutter||this.declutter;if(Aw){Aw.removeShape(Ay)}if(Ax&&this.map&&this.map.declutter){this.map.declutter.unregister(Ay)}},getByKey:function(Ax){var Ay=0,Aw=this.getSize(),Az;for(;Ay<Aw;Ay++){Az=this.getAt(Ay);if(Az.key&&Az.key===Ax){return Az}}return null},isOnMap:function(){return !!this._peer},getDeclutter:function(){return this.declutter},setDeclutter:function(Aw){this.declutter=Aw;if(this.map&&this.map.declutter){this.map.declutter.invalidate()}},setMinZoomLevel:function(Aw){this.minZoomLevel=Aw},getMinZoomLevel:function(){return this.minZoomLevel||J.MINZOOM},setMaxZoomLevel:function(Aw){this.maxZoomLevel=Aw},getMaxZoomLevel:function(){return this.maxZoomLevel||J.MAXZOOM},setVisible:function(Ax){var Ay=0,Az=this,Aw=Az.getSize(),A0;Az.visible=Ax;for(;Ay<Aw;Ay++){A0=Az.getAt(Ay);A0.setVisible(Ax);if(Ax){A0.resetTransform()}}},getVisible:function(){return this.visible},inZoomWindow:function(){if(!this.map){return }var Aw=this.map.getZoomLevel();return(Aw>=this.getMinZoomLevel()&&Aw<=this.getMaxZoomLevel())},getBoundingRect:function(){if(this.getSize()==0){return null}var A4,Ax=[],BA,A9,A5=0,A7,Aw,Ay;for(;A5<this.getSize();A5++){A4=this.getAt(A5);if((J.BasePoi&&A4 instanceof J.BasePoi)||A4.getValue("latLng")){if(A4.getValue("latLng")){Ax.push(A4.getValue("latLng"))}}else{if(J.ShapeOverlay&&A4 instanceof J.ShapeOverlay){if(J.CircleOverlay&&A4 instanceof J.CircleOverlay){BA=A4.shapePoints;if(BA&&BA.length>=1){var A2=BA[0];var A0=BA[1];var A3=parseFloat(A4.getRadius())*(A4.getRadiusUnit()=="MI"?1.6:1);var A6=J.Util.pointByDistanceBearing({lat:A2,lng:A0},A3,0).lat;var Az=J.Util.pointByDistanceBearing({lat:A2,lng:A0},A3,1.57079633).lng;var A8=J.Util.pointByDistanceBearing({lat:A2,lng:A0},A3,3.14159265).lat;var A1=J.Util.pointByDistanceBearing({lat:A2,lng:A0},A3,4.71238898).lng;Ax.push({lat:A6,lng:Az});Ax.push({lat:A8,lng:A1})}}else{if((J.RibbonOverlay&&A4 instanceof J.RibbonOverlay)||(J.LineOverlay&&A4 instanceof J.LineOverlay)||(J.EllipseOverlay&&A4 instanceof J.EllipseOverlay)||(J.RectangleOverlay&&A4 instanceof J.RectangleOverlay)||(J.PolygonOverlay&&A4 instanceof J.PolygonOverlay)){BA=A4.shapePoints;if(BA){A9=BA.length;for(A7=0;A7<A9;A7=A7+2){Ax.push({lat:BA[A7],lng:BA[A7+1]})}}}else{}}}}}Ay=new J.RectLL(Ax[0],Ax[0]);for(Aw=1;Aw<Ax.length;Aw++){Ay.extend(Ax[Aw])}return Ay}};G=function(Ax,Aw){this.display=Ax;this.collection=Aw;this.shapes={};var Ay=this.display.zlevel("shape");if(Aw.getName()){Ay.id=Aw.getName()}this.elt=Ay;this._initCollection();this.resetTransform()};G.prototype={getCanvas:function(){this._canvas},getCanvasSize:function(){var Aw={};Aw.height=this._canvas.offsetHeight;Aw.width=this._canvas.offsetWidth;if(this._canvas.tagName==="svg"){var Ax=this._canvas.getBBox();Aw.height=Ax.height;Aw.width=Ax.width}return Aw},_initCollection:function(){var Ay,Ax,Aw=this.collection;Aw._peer=this;Aw.map=this.display.map;for(Ax=0;Ax<Aw.getSize();Ax++){Ay=Aw.getAt(Ax);this.addShape(Ay)}},dispose:function(){this.eachShapePeer(function(Aw){Aw.dispose()});this.shapes={}},resetTransform:function(){J.Log.debug("ShapeLayer.resetTransform");var Aw=this.display;this.eachShapePeer(function(Ax){J.Log.debug("ShapeLayer.shape[].resetTransform");Ax.resetTransform(Aw.transform)})},eachShapePeer:function(Ay){var Ax=this.shapes,Aw;for(Aw in Ax){if(AG(Aw)&&Ax[Aw]){Ay(Ax[Aw])}}},eachShapePeerOrdered:function(Aw,Ay){var Ax=[],Az,A0;Ay=typeof (Ay)!=="undefined"?Ay:true;for(Az in this.shapes){if(this.shapes.hasOwnProperty(Az)&&AG(Az)){Ax.push(Az)}}Ax.sort(function(A1,A2){A1=A1.split("$")[2];A2=A2.split("$")[2];if(Ay){return parseInt(A1)-parseInt(A2)}else{return parseInt(A2)-parseInt(A1)}});for(A0=0;A0<Ax.length;A0++){Az=Ax[A0];if(this.shapes[Az]){Aw(this.shapes[Az])}}},addShape:function(Az){var Aw=s(Az),Ay;try{Ay=Az.createPeer();this._addPeer(Ay,Aw)}catch(Ax){}if(J.Util.isFunction(this._invalidate)){this._invalidate()}c(this.display.map,"shapeadded",new v(Az.className+".shapeadded",Az));return Aw},removeShape:function(Ay){var Aw=s(Ay),Ax=this.shapes[Aw];if(Ax){this._removePeer(Ax,Aw)}if(J.Util.isFunction(this._invalidate)){this._invalidate()}c(Ay,"removed",new v(Ay.className+".removed",Ay));c(this.display.map,"removed",new v(Ay.className+".removed",this));c(this.display.map,"shaperemoved",new v(Ay.className+".shaperemoved",this))},_addPeer:function(Ax,Aw){this.shapes[Aw]=Ax;Ax.layerInit(this,this.display.map);Ax.resetTransform(this.display.transform)},_removePeer:function(Ax,Aw){delete this.shapes[Aw];if(Ax.dispose){Ax.dispose()}}};var Av="shape.default";function Au(Ax){var Az,Ay=Ax.display,Aw=Ax._defaultShapeCollection;if(!Aw){Aw=new AM();Ax._defaultShapeCollection=Aw;Az=new J.ShapeLayer(Ay,Aw);Ay.addLayer(Av,Az)}return Aw}function As(Aw){var Ay="_shapeCollectionRegistry",Ax=Aw[Ay];if(!Ax){Ax=Aw[Ay]=new J.TKObjectCollection()}return Ax}o(J.TileMap.prototype,{_clearCollectionContentsOnRemoval:true,addShape:function(Aw){Au(this).add(Aw);return Aw},removeAllShapes:function(Ay){var A0=this,A1=A0._shapeCollectionRegistry?A0._shapeCollectionRegistry.items:[],Az,Aw;Ay=Ay||{};for(var Ax=0;Ax<A1.length;Ax++){Aw=true;Az=A1[Ax].collectionName;if(Az.indexOf("mqa.traffic_")>=0&&!Ay.removeTraffic){Aw=false}else{if(Az==="drawing"&&!Ay.removeDrawings){Aw=false}}if(Aw){J.Log.debug("remove shape collection contents: "+Az);A1[Ax].removeAll()}else{J.Log.debug("did not remove shapes in collection: "+Az)}}Au(A0).removeAll();c(A0,"mapcleared",new v("MQA.TileMap.cleared",A0))},removeShape:function(Aw){Au(this).removeItem(Aw)},getShapes:function(Ay){var Aw=Au(this);if(!Ay){return Aw}else{var Az=new AM();for(var Ax=0;Ax<Aw.getSize();Ax++){shape=Aw.getAt(Ax);if(J.BasePoi&&shape instanceof J.BasePoi){Az.addShape(shape)}}return Az}},getByKey:function(Aw){return Au(this).getByKey(Aw)},addShapes:function(Ax){for(var Aw=0;Aw<Ax.getSize();Aw++){this.addShape(Ax.getAt(Aw))}},replaceShapes:function(Aw){this.removeAllShapes();this.addShapes(Aw)},addShapeCollection:function(A0){var Ay="custom.shape.layer."+(At++),Aw=this.display,Az,Ax=As(this);if(Ax.contains(A0)){return }try{if(this.declutter){this.declutter.suspend()}Az=new J.ShapeLayer(Aw,A0);Az.key=Ay;Aw.addLayer(Ay,Az);Ax.add(A0)}finally{if(this.declutter){this.declutter.resume()}}c(this,"shapecollectionadded",new v("MQA.TileMap.shapecollectionadded",name))},removeShapeCollection:function(A0){var Ay,Aw=this.getShapeCollection(A0),Ax=As(this),A1,Az;if(!Aw){return }Ay=Aw._peer;if(!Ay){return }try{if(this.declutter){this.declutter.suspend()}if(this._clearCollectionContentsOnRemoval){Aw.removeAll()}else{for(Az=0;Az<Aw.getSize();Az++){A1=Aw.getAt(Az);if(A1.getDeclutter!=undefined&&A1.getDeclutter()&&this.declutter){this.declutter.unregister(Aw.getAt(Az))}}}this.display.removeLayer(Ay.key)}finally{if(this.declutter){this.declutter.resume()}}Ax.removeItem(Aw);delete Aw._peer;delete Aw.map},replaceShapeCollection:function(Ax,Aw){},getShapeCollection:function(Az){var Ay,Aw,Ax=As(this);for(Ay=0;Ay<Ax.getSize();Ay++){Aw=Ax.getAt(Ay);if(Aw&&Aw.collectionName==Az){return Aw}}},getShapeCollections:function(Aw){var Ay,Az=[],Ax=As(this);if(Aw){Az.push(Au(this))}for(Ay=0;Ay<Ax.getSize();Ay++){Az.push(Ax.getAt(Ay))}return Az},getShapeCollectionNames:function(){var Ax,Ay,Az=[],Aw=As(this);for(Ax=0;Ax<Aw.getSize();Ax++){Ay=Aw.getAt(Ax);if(Ay&&Ay.collectionName){Az.push(Ay.collectionName)}}return Az},getShapeCollectionCount:function(){return As(this).getSize()}});J.TileMap.prototype.getShapeByKey=J.TileMap.getByKey;J.TileMap.prototype.addPoi=J.TileMap.addShape;J.TileMap.prototype.removePoi=J.TileMap.removePoi;J.ShapeCollection=AM;J.ShapeLayer=G})();var AF;(function(){AF=function(A5){var A0,A1,A6;for(A0=0;A0<A5.length;A0++){A6=A5[A0].bounds;A6.w=Math.abs(A6.ulX-A6.lrX);A6.h=Math.abs(A6.ulY-A6.lrY);A6.ix=A6.ulX;A6.iy=A6.ulY}A5.sort(Ay);var A3=At(A5);Aw(A3,A5);var A4=[],A2=[A4];for(A0=0;A0<A5.length;A0++){if(A5[A0].bounds.bias){A4.push(A5[A0])}else{A2.push(A5[A0])}}return A2};function Ax(A0,A2){for(var A1=0;A1<A0.length;A1++){if(A0[A1]==A2){return A1}}return -1}function At(A5){var A3=[],A0=[],A6=0,A4;for(var A1=0;A1<A5.length;A1++){if(Ax(A3,A1)>=0){continue}A4=false;for(var A2=A1+1;A2<A5.length;A2++){if(Ax(A3,A2)>=0){continue}if(Av(A5[A1].bounds,A5[A2].bounds)){if(!A4){A0[A6]=[A1];A3.push(A1);A4=true}A0[A6].push(A2);A3.push(A2)}}if(A0[A6]&&A0[A6].length>0){A6++}}return A0}function Aw(BF,BJ){var A5={ulX:0,ulY:0,lrX:0,lrY:0};var A3=3.14;var BD,BC;var BL,BM;var A6,BE;var BI;var BK;var A2;var BH;var A7=false;var BB;if(BF.length==1&&BF[0].length==BJ.length){A7=true;BD=360/BF[0].length;BC=1350/BD;BC=(BC<75)?75:BC}else{BD=10;BC=75}var BG;var BN,BO;for(var A0=0,A8=BF.length;A0<A8;A0++){A6=-180;BE=Az(BF[A0],BJ);BI=1;BG=BC;for(var A1=0,A9=BF[A0].length;A1<A9;A1++){BK=BJ[BF[A0][A1]];BN=Math.ceil(BK.bounds.w/2);BO=Math.ceil(BK.bounds.h/2);if(!BK.moveable){continue}for(var BP=A6;;BP+=BD){if(BP>=180){++BI;BP-=360;if(BI>2){BG+=30}}if(BI>4){break}BL=Math.round(BG*Math.cos(A3*BP/180));BM=-Math.round(BG*Math.sin(A3*BP/180));A5.ulX=BE.x+BL-BN;A5.ulY=BE.y+BM-BO;A5.lrY=A5.ulY+BK.bounds.h;A5.lrX=A5.ulX+BK.bounds.w;A2=false;for(var A4=0,BA=BJ.length;A4<BA;A4++){BB=Ax(BF[A0],A4);if(!BJ[A4].moveable||(BJ[A4].bounds.ix!=BJ[A4].bounds.ulX)||(BJ[A4].bounds.iy!=BJ[A4].bounds.ulY)){if(Au(BJ[A4].bounds.ix+BN,BJ[A4].bounds.iy+BO,BJ[A4].bounds.ulX+BN,BJ[A4].bounds.ulY+BO,BK.bounds.ix+BN,BK.bounds.iy+BO,A5.ulX+BN,A5.ulY+BO)){A2=true;break}}if(BB<0){if((Av(A5,BJ[A4].bounds))||((BI<2)&&As((BK.bounds.ix+BN),(BK.bounds.iy+BO),A5.ulX+BN,A5.ulY+BO,BJ[A4].bounds))){A2=true;break}else{if((BI<2)&&(!BJ[A4].moveable||(BJ[A4].bounds.ix!=BJ[A4].bounds.ulX)||(BJ[A4].bounds.iy!=BJ[A4].bounds.ulY))){if(As(BJ[A4].bounds.ix+(BJ[A4].bounds.w/2),BJ[A4].bounds.iy+(BJ[A4].bounds.h/2),BJ[A4].bounds.ulX+BN,BJ[A4].bounds.ulY+BO,A5)){A2=true;break}}}}else{if((BB>=0)&&(BB<A1)&&(Av(A5,BJ[A4].bounds))){A2=true;break}}}if(A2){continue}A6=BP+BD;BH=BK;BK.bounds.ulX=A5.ulX;BK.bounds.ulY=A5.ulY;BK.bounds.lrX=A5.ulX+BK.bounds.w;BK.bounds.lrY=A5.ulY+BK.bounds.h;BK.bounds.bias={x:A5.ulX-BK.bounds.ix,y:A5.ulY-BK.bounds.iy};if(!BK.bounds.bias.x&&!BK.bounds.bias.y){BK.bounds.bias=null}break}}}}function Av(A8,A9){var A6=A8.ulX,A0=A8.ulY,A1=A8.lrX,A4=A8.lrY,A7=A9.ulX,A2=A9.ulY,A3=A9.lrX,A5=A9.lrY;return !(A7>=A1||A3<=A6||A2>=A4||A5<=A0)}function Az(A2,A6){var A4=0;var A5=0;var A0;var A1=A2.length;for(var A3=0;A3<A1;A3++){A0=A6[A2[A3]].bounds;A4+=A0.ix+A0.w/2;A5+=A0.iy+A0.h/2}return{x:Math.round(A4/A1),y:Math.round(A5/A1)}}function Au(BA,A4,BD,A6,A9,A3,BB,A5){var A0=(BD-BA==0)?(A6-A4)/1e-8:(A6-A4)/(BD-BA);var BC=A4-A0*BA;var A2=(BB-A9==0)?(A5-A3)/1e-8:(A5-A3)/(BB-A9);var BE=A3-A2*A9;var A7,A8;A7=Math.round(0-(BC-BE)/(A0-A2));A8=(Math.abs(A0)<Math.abs(A2))?Math.round(BC+A0*A7):Math.round(BE+A2*A7);if(((BA<=A7&&BD>=A7)||(BA>=A7&&BD<=A7))&&((A9<=A7&&BB>=A7)||(A9>=A7&&BB<=A7))&&((A4<=A8&&A6>=A8)||(A4>=A8&&A6<=A8))&&((A3<=A8&&A5>=A8)||(A3>=A8&&A5<=A8))){var A1=3;if(((Math.abs(BA-A7)<=A1)&&(Math.abs(A4-A8)<=A1))||((Math.abs(A9-A7)<=A1)&&(Math.abs(A3-A8)<=A1))||((Math.abs(BD-A7)<=A1)&&(Math.abs(A6-A8)<=A1))||((Math.abs(BB-A7)<=A1)&&(Math.abs(A5-A8)<=A1))){return(false)}return(true)}return(false)}function As(BC,A2,BE,A4,BG){var A0=(BE-BC==0)?(A4-A2)/1e-8:(A4-A2)/(BE-BC);var BB=A2-A0*BC;var A7=0;var A6=BG.h/1e-8;var BA,A1,BD,A3;var BF,A5,A9;for(var A8=1;A8<=4;A8++){switch(A8){case 1:BA=BG.ulX;A1=BG.ulY;BD=BG.lrX;A3=BG.lrY;break;case 2:BA=BG.lrX;A1=BG.ulY;BD=BG.lrX;A3=BG.lrY;break;case 3:BA=BG.ulX;A1=BG.lrY;BD=BG.lrX;A3=BG.lrY;break;case 4:BA=BG.ulX;A1=BG.ulY;BD=BG.ulX;A3=BG.lrY;break}if(A8%2==1){BF=A1;A5=Math.round(0-(BB-BF)/A0);A9=BF}else{BF=A1-A6*BA;A5=Math.round(0-(BB-BF)/(A0-A6));A9=(Math.abs(A0)<Math.abs(A6))?Math.round(BB+A0*A5):Math.round(BF+A6*A5)}if(((BC<=A5&&BE>=A5)||(BC>=A5&&BE<=A5))&&((BA<=A5&&BD>=A5)||(BA>=A5&&BD<=A5))&&((A2<=A9&&A4>=A9)||(A2>=A9&&A4<=A9))&&((A1<=A9&&A3>=A9)||(A1>=A9&&A3<=A9))){return(true)}}return(false)}function Ay(A0,A1){return A0.bounds.ulX-A1.bounds.ulX}})();(function(){function As(At){this.map=At;this._enabled=0;this._markers=E()}As.prototype={register:function(At){if(!At.getNeededBounds||!At.setBias||!At.shouldDeclutter){return }if(!this._markers.put(At,At)&&At.shouldDeclutter()){this.invalidate()}},unregister:function(At){if(this._markers.remove(At)){this.invalidate()}},invalidate:function(){this._invalid=true;if(this._enabled==0){this._execute()}},suspend:function(){this._enabled++},resume:function(){if(this._enabled>0){if(--this._enabled==0&&this._invalid){this._execute()}}},withSuspended:function(Au,At){this.suspend();try{if(arguments.length>1){return At.call(Au)}else{return Au()}}finally{this.resume()}},_execute:function(){this._invalid=false;var Au=this.map.display.transform,Az=[];this._markers.each(function(A2){Az.push({marker:A2,bounds:A2.getNeededBounds(Au),moveable:A2.shouldDeclutter()=="moveable"})});var Ax,Av,Aw,Ay,A0,At,A1=AF(Az);for(A0=0;A0<A1.length;A0++){Ay=A1[A0];if(Ay.marker){Ay.marker.setBias(null)}else{for(At=0;At<Ay.length;At++){Ax=Ay[At];Av=Ax.marker.bias;Aw=Ax.bounds.bias;if(!Av||!Aw||Av.x!=Aw.x||Av.y!=Aw.y){Ax.marker.setBias(Aw)}}}}}};AU(Aj.prototype,{onMapInit$After:function(){this.declutter=new As(this)},getDeclutter:function(){return this.declutter},onZoomEnd$After:function(){this.declutter.invalidate()}});AU(G.prototype,{_addPeer$After:function(At){if(typeof At.shouldDeclutter=="function"&&At.shouldDeclutter()){var Au=this.display.map.declutter;At._declutterCnt=Au;Au.register(At)}},_removePeer$After:function(At){if(At._declutterCnt){this.display.map.declutter.unregister(At)}}})})();var Y;(function(){Y=function(){var Av=this;Av._cnts=E();Av._pxX=0;Av._pxY=0;Av.extraFields={};Av.type="BasePoi"};Y.prototype=o(new J.Component(),{createPeer:function(){return this},layerInit:function(Aw,Av){var Ax=this;Ax.map=Av;Ax.layer=Aw;Ax._cnts.each(function(Ay){Au(Ax,Ay)})},dispose:function(){var Av=this;Av._cnts.each(function(Aw){As(Av,Aw);if(Aw.parentNode){Aw.parentNode.removeChild(Aw)}})},_onDOMEvent:function(Av){},resetTransform:function(Av){this._updatePosition()},_updatePosition:function(){var Ax=this,A2=Ax.latLng;if(!Ax.map){return }if(!Ax._updateVisibility()){return }function Ay(A4){var A5=parseFloat(A4.lat),A6=parseFloat(A4.lng);if(isNaN(A5)||isNaN(A6)){return false}return true}if(!Ay(A2)){return }var A1=Ax.map.display.transform,Aw=A1.latLngToDisplay(A2.lat,A2.lng),A3,Av,Az=Ax.bias,A0=Ax._elt;if(Az&&(Az.x||Az.y)){A3=Aw.x+Az.x;Av=Aw.y+Az.y;Ax._updateBias(Aw.x,Aw.y,Az.x,Az.y)}else{A3=Aw.x;Av=Aw.y;Ax._updateBias(A3,Av,0,0)}if(Ax._pxX!=A3||Ax._pxY!=Av){Ax._pxX=A3;Ax._pxY=Av;Ax._cnts.each(function(A4){var A5=A4._poiOfs;A4.style.top=(A5.y+Av)+"px";A4.style.left=(A5.x+A3)+"px"});c(Ax,"move",new v("Poi.move",Ax))}},_updateBias:function(Ay,Av,Aw,Ax){},_actIsVisible:function(){if(!this.layer){return false}var Ax=this,Av=(Ax.map?Ax.map.zoom:0),Aw=Ax.layer.collection;return Ax.visible&&Ax.latLng&&Av>=Math.max(Ax.minZoomLevel,Aw.getMinZoomLevel())&&Av<=Math.min(Ax.maxZoomLevel,Aw.getMaxZoomLevel())},_updateVisibility:function(){var Av=this._actIsVisible(),Aw=false;this._cnts.each(function(Ax){var Ay=Ax.style.display;Ax.style.display=((Av&&Ax._poiV)?"block":"none");if(Ay!==Ax.style.display){Aw=true}});if(Av&&Aw){this._updatePosition()}return Av},setContent:function(Ay,A0,A1,A2,A3,Ax){var Aw=this,Az=Aw._cnts,Av=Az.remove(Ay);if(Av){As(Aw,Av);if(Av.parentNode){Av.parentNode.removeChild(Av)}}if(A0){AY(A0);A0.style.position="absolute";A0._poiOfs={x:A1,y:A2};A0._poiZ=Ax;A0._poiV=true;Az.put(Ay,A0);if(Av&&Av.parentNode){Av.parentNode.removeChild(Av)}Au(Aw,A0);At(Aw,A0,A3)}},getContent:function(Av){return this._cnts.get(Av)},setContentOffset:function(Ax,Aw,Ay){var Av=this._cnts.get(Ax);if(Av){Av._poiOfs={x:Aw,y:Ay};Au(this,Av)}},setContentZIndex:function(Aw,Ax){var Av=this._cnts.get(Aw);if(Av){Av._poiZ=Ax;Au(this,Av)}},setContentVisible:function(Ax,Av){var Aw=this._cnts.get(Ax);if(Aw){Aw._poiV=Av;Aw.style.display=(this._actIsVisible()&&Av)?"block":"none"}},addExtraField:function(Aw,Av){if(Av==null||Av==undefined){delete this.extraFields[Aw]}else{this.extraFields[Aw]=Av}},getExtraField:function(Av){return this.extraFields[Av]}});l(Y.prototype);function At(Aw,Ax,Av){Ax._eventGroup=Av;if(Av){Aw._wireDOMEvents(Ax)}}function As(Av,Aw){if(Aw&&Aw._eventGroup){Av._unwireDOMEvents(Aw);Aw._eventGroup=null}}function Au(Av,Aw){var Az=Av.layer,Ay,Ax=Aw._poiOfs;if(!Az){return }Ay=Az.display.zlevel(Aw._poiZ||C.poi);Aw.style.top=(Ax.y+Av._pxY)+"px";Aw.style.left=(Ax.x+Av._pxX)+"px";if(Ay!==Aw.parentNode){Ay.appendChild(Aw)}}Y.prototype.defineProperty("key",null,"");Y.prototype.defineProperty("visible",null,true,"_updateVisibility");Y.prototype.defineProperty("latLng",function(Av){return{lat:Av.lat,lng:Av.lng}},null,"_updatePosition");Y.prototype.defineProperty("bias",function(Av){return{x:Av.x,y:Av.y}},null,"_updatePosition");Y.prototype.defineProperty("minZoomLevel",parseInt,J.MINZOOM,"_updateVisibility");Y.prototype.defineProperty("maxZoomLevel",parseInt,J.MAXZOOM,"_updateVisibility");J.BasePoi=Y})();var AJ;(function(){function Av(A4){var A1=this,A0,A3,A2,Ay,Az;A1.dragStart=function(){A0=A4.getLatLng();A3=A1.display.transform.latLngToDisplay(A0.lat,A0.lng);A2=A4.getBias();Ay=A4.getZIndex();A4.setZIndex("poi_drag");A4.snapback=false};A1.dragMove=function(){if(!Az){c(A4,"dragstart",new v("StdPoi.dragstart",A4));Az=true;A4._dragging=true}if(A4.draggable==="bias"||(A4.declutter&&!A4.draggable)){A4.setBias({x:A1.dragXY.x-A3.x,y:A1.dragXY.y-A3.y})}else{A4.setBias(null);A4.setLatLng(A1.dragLatLng)}c(A4,"drag",new v("StdPoi.drag",A4))};A1.dragCancelled=function(){A4.setLatLng(A0);A4.setBias(A2);A4.setZIndex(Ay);var A5=new v("StdPoi.dragend",A4);A5.cancelled=true;c(A4,"dragend",A5)};A1.dragEnd=function(){A4.setZIndex(Ay);if(Az){A4._dragging=false;if(A4.snapback){A1.dragCancelled()}else{c(A4,"dragend",new v("StdPoi.dragend",A4))}}}}function As(Ay,Az){var A0=this;A0.stateName=Ay;A0.cursor="default";if(Az){A0.icon=new AW(MQICONSERVER+"/icons/stop.png",22,28);A0.setIconOffset({x:-11,y:-28})}A0.shadow=new AW(AK("images/poi/shadow.png"),23,7)}As.prototype={isValid:function(){return !!this.icon},activate:function(){var Az=this,Ay=Az.poi;Ay.setContentVisible(Az.stateName+"-icon",true);Ay.setContentVisible(Az.stateName+"-shadow",true);Az.activated=true;if(!Az.inited){Az.applyIcon();Az.applyShadow();Az.inited=true}},deactivate:function(){var Az=this,Ay=this.poi;Ay.setContentVisible(Az.stateName+"-icon",false);Ay.setContentVisible(Az.stateName+"-shadow",false);Az.activated=false},shadowAnchor:function(){var Az=this.getIconOffset(),A0=this.icon,Ay=(A0&&A0.height)||0;return{x:Az.x,y:Az.y+Ay}},getIconOffset:function(){var Ay=this.iconOffset,Az=this.icon;if(!Ay){Ay=Az?{x:-parseInt(Az.width/2),y:-parseInt(Az.height/2)}:{x:0,y:0}}return Ay},setIconOffset:function(Ay){var Az=this;Az.iconOffset=Ay;Az.applyIcon(true);Az.applyShadow(true)},getIcon:function(){return this.icon},setIcon:function(Az,Ay){this.icon=Az;this.iconOffset=Ay;this.applyIcon();this.applyShadow(true)},applyIcon:function(A2){var Ay=this.poi,A0=this.icon,Az=this.getIconOffset()||{x:0,y:0},A1;if(Ay){if(A2){Ay.setContentOffset(this.stateName+"-icon",Az.x,Az.y)}else{A1=A0&&A0.createElement();if(A1){A1.style.cursor=this.cursor}Ay.setContent(this.stateName+"-icon",A1,Az.x,Az.y,"icon",Ay.zIndex);Ay.setContentVisible(this.stateName+"-icon",this.activated)}}},getCursor:function(){return this.cursor},setCursor:function(Ay){this.cursor=Ay;var Az=this.poi,A0;if(Az){A0=Az.getContent(this.stateName+"-icon");if(A0){A0.style.cursor=Ay}}},getShadow:function(){return this.shadow},setShadow:function(Ay){this.shadow=Ay;this.applyShadow()},getShadowOffset:function(){return this.shadowOffset||{x:6,y:-4}},setShadowOffset:function(Ay){this.shadowOffset=Ay;this.applyShadow()},applyShadow:function(A2){var Ay=this.poi,A4=this.shadow,Az=this.getShadowOffset(),A0=this.shadowAnchor(),A3=A0.x+Az.x,A5=A0.y+Az.y;if(Ay){if(A2){Ay.setContentOffset(this.stateName+"-shadow",A3,A5)}else{var A1=A4&&A4.createElement();if(A1){A1._zbg=true}Ay.setContent(this.stateName+"-shadow",A1,A3,A5,null,"poi_shadow");Ay.setContentVisible(this.stateName+"-shadow",this.activated)}}},getBounds:function(A2,A4){var A3=this.getIconOffset(),A1=this.icon,Az=this.getShadowOffset(),A0=this.shadow,Ay=this.shadowAnchor(),A6;A6={x:A2,y:A4,anchorX:A2,anchorY:A4,width:0,height:0,icon:{x:A3.x,y:A3.y,width:(A1&&A1.width)||0,height:(A1&&A1.height)||0},shadow:{x:Az.x+Ay.x,y:Az.y+Ay.y,width:(A0&&A0.width)||0,height:(A0&&A0.height)||0}};function A5(A9){A9.offsetX=A9.x;A9.offsetY=A9.y;A9.x+=A2;A9.y+=A4;var A7=A9.x+A9.width,A8=A9.y+A9.height,BA=A6.x+A6.width,BB=A6.y+A6.height;if(A6.x>A9.x){A6.x=A9.x}if(A6.y>A9.y){A6.y=A9.y}if(BA<A7){A6.width+=(A7-BA)}if(BB<A8){A6.height+=(A8-BB)}}A5(A6.icon);A5(A6.shadow);return A6}};AJ=function(Az,Ay){Y.call(this);this.type="StdPoi";this.zIndex="poi";this._dspStates={"":new As("",true)};this.stateStack=[""];if(Az){if(Az.lat&&(typeof Az.lat=="string")){Az.lat=parseFloat(Az.lat)}if(Az.lng&&(typeof Az.lng=="string")){Az.lng=parseFloat(Az.lng)}this.setLatLng(Az)}if(Ay){this.setIcon(Ay)}this.draggable=false;this.addDOMEvent("touchstart","mousedown","mouseup","dblclick","mouseover","mouseout")};function At(Az,A0,Ay){A0._eventGroup=Ay;if(Ay){Az._wireDOMEvents(A0)}}function Ax(Ay,Az){if(!Az||!Az._eventGroup){return }if(Az._eventGroup){Ay._unwireDOMEvents(Az)}Az._eventGroup=null}var Au=Ap(Y,{_onDOMEvent:function(Az){if(Az.type=="click"){return }var A0=new v("MQA.Poi."+Az.type,this),Ay;A0.button=e(Az)?J.BUTTON_MQ_LEFT:J.BUTTON_MQ_RIGHT;A0.domEvent=Az;c(this,Az.type,A0);Ay=this["_onDOM"+Az.type];if(Ay){Ay.call(this,Az)}},_fakeClick:function(Az){var A0=new v("MQA.Poi.click"),Ay;A0.button=e(Az)?J.BUTTON_MQ_LEFT:J.BUTTON_MQ_RIGHT;A0.domEvent=Az;A0.srcObject=this;c(this,"click",A0)},_onDOMmousedown:function(Ay){if(this.draggable||this.declutter){this.map.display.startDrag(Ay,new Av(this))}y(Ay)},_onDOMmouseup:function(Ay){if(!this._dragging){this._fakeClick(Ay)}else{}},_onDOMclick:function(Ay){},layerInit$After:function(){this._activated=true;this.setState(this.state);this.setBias(this.bias)},getDisplayState:function(Ay){var Az=this._dspStates[Ay||""];if(!Az){Az=this._dspStates[Ay||""]=new As(Ay)}return Az},setIcon:function(Az,Ay){this.getDisplayState(Ay).setIcon(Az)},getIcon:function(Ay){return this.getDisplayState(Ay).icon},setIconOffset:function(Ay,Az){this.getDisplayState(Az).setIconOffset(Ay)},getIconOffset:function(Ay){return this.getDisplayState(Ay).getIconOffset()},setShadow:function(Ay,Az){this.getDisplayState(Az).setShadow(Ay)},getShadow:function(Ay){return this.getDisplayState(Ay).getShadow()},setShadowOffset:function(Az,Ay){this.getDisplayState(Ay).setShadowOffset(Az)},getShadowOffset:function(Ay){return this.getDisplayState(Ay).getShadowOffset()},getCursor:function(Ay){return this.getDisplayState(Ay).getCursor()},setCursor:function(Ay,Az){this.getDisplayState(Az).setCursor(Ay)},setAltStateFlag:function(Ay){if(Ay!=this.altStateFlag){if(Ay){this.setState("alt")}else{this.setState("")}}this.altStateFlag=Ay},setState:function(Ay){this.stateStack=[Ay];if(!this._dspStates[Ay]){this._dspStates[Ay]=new As(Ay)}return this._applyState(Ay)},_applyState:function(Az){if(this._activated){var A0=this._dspStates[Az||""],Ay=this._curDspState;if(A0&&A0.isValid()){if(Ay){Ay.deactivate()}A0.poi=this;A0.activate();this._curDspState=A0;return true}else{return false}}else{return false}},getState:function(){return this.stateStack[this.stateStack.length-1]||""},pushState:function(Ay){this.stateStack.push(Ay);this._applyState(Ay)},popState:function(){if(this.stateStack.length>1){var Ay=this.stateStack.pop();this._applyState(Ay)}else{this.stateStack=[""];this._applyState("")}},_updateBias:function(A0,A2,A6,A7){if(!this._activated){return }var Az,A4,A5,A1=this.getIcon(),A3=this.getIconOffset();if(!A6&&!A7){if(this.getState()!=""){this.setState("")}this.setContent("leader",null);return }else{if(!this.draggable){this.draggable="bias"}if(this.getState()!="bias"){this.setState("bias");this._dspStates.bias.icon=A1;this._dspStates.bias.iconOffset=A3}}var Ay=this;J.withModule("graphics",function(){var BG=Math.abs(A6),BA=Math.abs(A7),BF=6,BE,A9,BB,BC,BD,A8,BH;var BE=J.Graphics.getCanvas(BG+2*BF,BA+2*BF);if(A6>0){A9=BF;BC=BG+BF;A4=(-A6-BF)}else{A9=BG+BF;BC=BF;A4=(-BF)}if(A7>0){BB=BF;BD=BA+BF;A5=(-A7-BF)}else{BB=BA+BF;BD=BF;A5=(-BF)}J.Graphics.drawLine(BE,{points:[{x:A9,y:BB},{x:BC,y:BD}],color:"#000000",borderWidth:2});J.Graphics.drawEllipse(BE,{points:[{x:A9-BF/2,y:BB-BF/2},{x:A9+BF/2,y:BB+BF/2}],fillColor:"#000000"});Ay.setContent("leader",BE,A4,A5,null,"poi_leader")})},shouldDeclutter:function(){var Ay=this.layer;if(this.declutter||(Ay&&Ay.collection.declutter)){J.Log.debug("stdpoi.js-> should declutter");return this.declutterFixed?"fixed":"moveable"}else{return false}},getNeededBounds:function(A2){var A1=this.getIcon(),Az=(A1&&A1.width)||0,Ay=(A1&&A1.height)||0,A0=(A2||this.map.display.transform).latLngToDisplay(this.latLng.lat,this.latLng.lng);return{xy:A0,ulX:A0.x-Az/2,ulY:A0.y-Ay/2,lrX:A0.x+Az/2,lrY:A0.y+Ay/2}},getCurrentBounds:function(){var A0=this._elt,Ay=this._dspStates[this.getState()],A1=this.bias,Az=Ay.getBounds(this._pxX,this._pxY);Az.biasX=(A1&&A1.x)||0;Az.biasY=(A1&&A1.y)||0;return Az},getDeclutterMode:function(){return this.declutter},setDeclutterMode:function(Ay){this.setDeclutter(Ay)},_applyZIndex:function(){var Az=this.zIndex,Ay=this;this._cnts.each(function(A1,A0){if(A0.match(/\-icon/)){Ay.setContentZIndex(A0,Az)}})},dispose:function(){var Ay=this;this._cnts.each(function(Az){Ax(Ay,Az);if(Az.parentNode){Az.parentNode.removeChild(Az)}});c(this,"poidispose")}});AJ.prototype=Au;Au.defineProperty("className",null,"MQA.Poi");Au.defineProperty("altStateFlag");Au.defineProperty("titleVisible");Au.defineProperty("declutter");Au.defineProperty("declutterFixed");Au.defineProperty("infoTitleHTML",null,null,function(){this.setCursor("pointer","")});Au.defineProperty("infoContentHTML",null,null,function(){this.setCursor("pointer","")});Au.defineProperty("rolloverContent",null,null,function(){this.setCursor("pointer","")});Au.defineProperty("draggable",null,null,function(){if(this.draggable){this.setCursor("pointer","")}else{this.setCursor("default","")}});Au.defineProperty("snapback");Au.defineProperty("zIndex",null,"poi","_applyZIndex");function Aw(Az,A0){var Ay=AJ.prototype;Ay["get"+A0+"Icon"]=function(){return this.getIcon(Az)};Ay["set"+A0+"Icon"]=function(A1){this.setIcon(A1,Az)};Ay["get"+A0+"Shadow"]=function(){return this.getIcon(Az)};Ay["set"+A0+"Shadow"]=function(A1){this.setIcon(A1,Az)};Ay["get"+A0+"IconOffset"]=function(){return this.getIconOffset(Az)};Ay["set"+A0+"IconOffset"]=function(A1){this.setIconOffset(A1,Az)};Ay["get"+A0+"ShadowOffset"]=function(){return this.getIconOffset(Az)};Ay["set"+A0+"ShadowOffset"]=function(A1){this.setShadowOffset(A1,Az)}}Aw("bias","Bias");Aw("bias","Declutter");Aw("alt","Alt")})();J.StdPoi=AJ;J.Poi=AJ;(function(){var A5=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A6,Aw,A8={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function As(A9){A5.lastIndex=0;return A5.test(A9)?'"'+A9.replace(A5,function(BA){var BB=A8[BA];return typeof BB==="string"?BB:"\\u"+("0000"+BA.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+A9+'"'}function A2(BG,BD){var BB,BA,BH,A9,BE=A6,BC,BF=BD[BG];switch(typeof BF){case"string":return As(BF);case"number":return isFinite(BF)?String(BF):"null";case"boolean":case"null":return String(BF);case"object":if(!BF){return"null"}A6+=Aw;BC=[];if((Object.prototype.toString.apply(BF)==="[object Array]")||(typeof (BF)=="object"&&typeof (BF.length)=="number"&&(BF.length===0||typeof ((BF[0]))!="undefined"))){A9=BF.length;for(BB=0;BB<A9;BB+=1){BC[BB]=A2(BB,BF)||"null"}BH=BC.length===0?"[]":A6?"[\n"+A6+BC.join(",\n"+A6)+"\n"+BE+"]":"["+BC.join(",")+"]";A6=BE;return BH}for(BA in BF){if(Object.hasOwnProperty.call(BF,BA)){BH=A2(BA,BF);if(BH){BC.push(As(BA)+(A6?": ":":")+BH)}}}BH=BC.length===0?"{}":A6?"{\n"+A6+BC.join(",\n"+A6)+"\n"+BE+"}":"{"+BC.join(",")+"}";A6=BE;return BH}}function Av(A9){J.Log.debug(A9);if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(A9)}return A2("",{"":A9})}function A3(BC){var BA=[],BB={},A9;for(A9 in BC){if(!BB[A9]){BA.push(encodeURIComponent(A9)+"="+encodeURIComponent(String(BC[A9])))}}return BA.join("&")}function A4(){function A9(BB){try{return new ActiveXObject(BB)}catch(BC){return undefined}}if(window.XMLHttpRequest){return new window.XMLHttpRequest()}if(window.ActiveXObject){var BA=A9("Msxml2.XMLHTTP.6.0")||A9("Msxml2.XMLHTTP.3.0")||A9("Msxml2.XMLHTTP")||A9("Microsoft.XMLHTTP");if(BA){return BA}}throw new Error("Current browser configuration does not support XMLHttpRequest")}function At(A9){try{if(window.JSON&&window.JSON.parse){return window.JSON.parse(A9)}return J._jsEval("("+A9+")")}catch(BA){return undefined}}function Ax(A9,BA,BE){if(!BA){BA={}}var BH=A4(),BF,BG,BB=BA.verb||"GET",BC=(typeof BA.async!="undefined")?BA.async:true;setup=BA.setup;BH.open(BB,A9,BC);if(setup){setup(BH)}if((BB=="GET")&&(J.browser.name=="msie")){BH.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")}var BD=function(){BH.onreadystatechange=Z;var BI,BM;try{BI=BH.status}catch(BL){}BM=BH;BH=null;if(BG){clearTimeout(BG)}if(BI>=200&&BI<=299){BE(BM,false)}else{var BK;try{BK=BM.responseText}catch(BJ){}BE(BM,{reason:"HTTP error",statusCode:BI,responseText:BK})}};BH.onreadystatechange=function(){if(BF){return }if(BH.readyState==4){BD()}};if(BA.timeout){BG=setTimeout(function(){if(BF){return }BF=true;BH.onreadystatechange=Z;BH.abort();BE(BH,{reason:"Request timed out"});BH=null},BA.timeout)}if(BA.postData){}if(BA.formUrlEncoded){BH.setRequestHeader("Content-type","application/x-www-form-urlencoded");BH.setRequestHeader("Content-length",BA.postData.length);BH.setRequestHeader("Connection","close")}BH.send(BA.postData||null);if(!BC&&(J.browser.name=="firefox")&&BH){BD()}return function(){if(BH){BF=true;BH.onreadystatechange=Z;BH.abort();BH=null;if(BG){clearTimeout(BG)}}}}function A1(A9,BA,BB){return Ax(A9,BA,function(BD,BE){if(BE){BB(false,BE)}else{var BC=At(BD.responseText);if(!BC){BB(false,{reason:"Parse Error",responseText:BD.responseText})}else{BB(BC,null,BD.responseText)}}})}function Az(A9,BC,BA,BB){BA=AU(BA,{verb:"POST",setup$After:function(BD){BD.setRequestHeader("Content-Type","application/json; charset=UTF-8")},postData:Av(BC)});return A1(A9,BA,BB)}function A7(A9,BA){var BB=document.createElement("script");BB.src=A9;BB.type="text/javascript";document.body.appendChild(BB);return function(){}}function A0(A9,BA,BC){var BB=document.createElement("script");BB.src=A9;BB.type="text/javascript";if(J.browser.name=="msie"){BB.onreadystatechange=function(){BC()}}else{BB.onload=function(){BC()}}document.body.appendChild(BB);return function(){}}var Au=0;function Ay(){return(new Date().getTime()+","+(++Au))}J.IO={toQueryString:A3,parseJSON:At,doXhr:Ax,doGetJSON:A1,doPostJSON:Az,doJSONP:A7,doJSONV:A0,stringifyJSON:Av,cacheBust:Ay}})();(function(){var Az=window.MQA,Ay=MQLOGURL+"/transaction";function Aw(A5,A7,A2,A3,A8){A2=parseInt(A2*1000000)/1000000;A3=parseInt(A3*1000000)/1000000;var A4=A5.getScale(),A6=A5.getCenter(),A1;A1=Ay+"?transaction=log&t="+A7+"&c="+A2+"&c2="+A3+"&s="+A8+"&lat="+A6.lat+"&lng="+A6.lng+"&key="+Key+"&width="+A5.width+"&height="+A5.height+"&rand="+Math.floor(Math.random()*99991)+"&v=JS_"+MQTOOLKIT_VERSION+"_MQ&r=";return A1}function Av(A1){var A4=A1._tranLayer,A3=false,A2=A4.lastScale;if(A4.mapaccum1>0){A1.maptiler.src=Aw(A1,"m",A4.mapaccum1,A4.mapaccum2,A2);A3=true}if(A4.sataccum1>0){A1.sattiler.src=Aw(A1,"a",A4.sataccum1,A4.sataccum2,A2);A3=true}if(A4.hybaccum1>0){A1.hybtiler.src=Aw(A1,"h",A4.hybaccum1,A4.hybaccum2,A2);A3=true}A4.resetStats(true);return A3}function As(A1){var A2=document.createElement("img");A2.src=Az.RESOURCES+"nothing.gif";A2.unselectable="on";A2.style.MozUserSelect="none";A2.style.display="none";A1.appendChild(A2);return A2}function Ax(A1){var A2=A1.display.layers;return{map:A2[Az.TILE_LAYER_ID.MAP]?true:false,sat:A2[Az.TILE_LAYER_ID.SAT]?true:false,hyb:A2[Az.TILE_LAYER_ID.HYB]?true:false}}function A0(A1){this.map=A1;this.resetStats(true);this.resetStats(false);this.lastScale=A1.getScale()}A0.prototype={resetStats:function(A1){var A2=this,A3=Ax(A2.map);if(A1){A2.mapaccum1=0;A2.sataccum1=0;A2.hybaccum1=0;A2.mapaccum2=0;A2.sataccum2=0;A2.hybaccum2=0}else{if(A3.map){A2.mapaccum1+=1;A2.mapaccum2+=1}if(A3.sat){A2.sataccum1+=1;A2.sataccum2+=1}if(A3.hyb){A2.hybaccum1+=1;A2.hybaccum2+=1}}A2.diffaccum=0;A2.tileOffsetX=0;A2.tileOffsetY=0},resetTransform:function(){var A1=this;Av(A1.map);A1.tileOffsetX=0;A1.tileOffsetY=0;A1._lastTileCoords=null;A1.lastScale=A1.map.getScale()},setViewport:function(A4,A7,A3,A5){var A6=this,BI=A6.map,A2=BI.display,BA=A2.transform,BF,BB=0,BG,A8=At(BA,A4,A7,A3,A5),BE=A6._lastTileCoords,BC,A1,BH,BD;function A9(){return true}if(BE&&A9()){BC=BE.ul[0]-A8.ul[0];A1=Au(A8.lr[0]-BE.lr[0]);BH=A8.ul[1]-BE.ul[1];BD=Au(BE.lr[1]-A8.lr[1]);A6.tileOffsetX+=BC;A6.tileOffsetY+=BH;BC=Au(BC);BH=Au(BH);BB+=(BC+A1)*A8.rowcount;BB+=(BH+BD)*A8.colcount;if(BB>0){BG=BB/(A8.rowcount*A8.colcount*9);BF=Ax(A6.map);if(BF.map){A6.mapaccum1+=BG}if(BF.sat){A6.sataccum1+=BG}if(BF.hyb){A6.hybaccum1+=BG}if(Math.abs(A6.tileOffsetX)>4||Math.abs(A6.tileOffsetY)>4){Av(A6.map)}}}A6._lastTileCoords=A8}};function Au(A1){return A1<0?0:A1}function At(A5,A9,A1,A8,A2){var BA=A5.displayProj,A7=A5.displayToLatLng(A9,A1),A3=BA.getTileCoords([A7.lng,A7.lat]),A6,A4;A6=Math.floor(A8/Az.TILESIZE);A4=Math.floor(A2/Az.TILESIZE);return{ul:A3,lr:[A3[0]+A6,A3[1]-A4],colcount:A6+1,rowcount:A4+1}}AU(Az.TileMap.prototype,{onMapInit$After:function(){var A3=this,A2=A3.controlAnchors[0],A1;A3.maptiler=As(A2);A3.sattiler=As(A2);A3.hybtiler=As(A2);A1=new A0(A3);A3._tranLayer=A1;A3.display.addLayer("tran-"+s(A1),A1)},dispose$Before:function(){var A1=Av(this);if(A1&&Az.EventUtil._inGlobalDtor){var A2=new Date().getTime()+250;while(new Date().getTime()<A2){}}},onMapTypeChanged$After:function(){var A2=this,A1=A2._tranLayer;if(A1){Av(A2);A2._tranLayer.resetStats(false)}},setCenter$Before:function(){var A1=this._tranLayer;if(A1){Av(this);A1.resetTransform();A1.resetStats(false)}},onMoveStart$After:function(){var A1=this._tranLayer,A2=this.display;if(A1){A1.startx=A2.ulX;A1.starty=A2.ulY}},onMoveEnd$After:function(){var A1=this,A4=A1._tranLayer,A2=A1.display,A8,A9,A3,A6,A5,A7;if(!A4){return }A8=A4.startx;A9=A4.starty;A3=Math.abs(A2.ulX-A8);A6=Math.abs(A2.ulY-A9);A4.diffaccum+=((A3*A6)+((A1.width-A3)*A6)+((A1.height-A6)*A3));A5=((A4.diffaccum/(A1.width*A1.height))>=0.4);if(A5){A7=Ax(A1);if(A7.map){A4.mapaccum2+=1}if(A7.sat){A4.sataccum2+=1}if(A7.hyb){A4.hybaccum2+=1}A4.diffaccum=0}A4.startx=null;A4.starty=null},onZoomEnd$After:function(){this._tranLayer.resetStats(false)}})})();(function(){var As=window.MQA;o(As.TileMap.prototype,{_clearCollectionContentsOnRemoval:false})})();(function(){var A1=window.MQA,Ay=A1.Log.debug,A4=A1.mixin,Ax=A1.connect,Av=A1.EventUtil.observe,As=A1.EventManager.trigger,A3=A1.EventUtil.hitch,Az=A1.Event;var A1=window.MQA;function At(A5){return function(){var A7,A8=[],A6=this;for(A7=0;A7<arguments.length;A7++){A8.push(arguments[A7])}A1.withModule("basicwindow",function(){A5.apply(A6,A8)})}}function Aw(A5,A6){if(A5.rolloverContent){Ay("has rollover content");A6.setContent(A5.rolloverContent)}else{if(A5.infoTitleHTML){Ay("has info title html");A6.setContent(A5.infoTitleHTML)}else{A6.setTitle(A5.infoTitleHTML||"");A6.setTitleBackgroundColor(A5.titleBackgroundColor||"");A6.setContent(A5.getInfoContentHTML()||"")}}}function A2(A5,A6){A6.setTitle(A5.infoTitleHTML||"");A6.setTitleBackgroundColor(A5.titleBackgroundColor||"");A6.setContent(A5.getInfoContentHTML()||"")}function Au(A8,A6,BA){var A9=A6.getCurrentBounds();BA.setPosition({lat:A6.latLng.lat,lng:A6.latLng.lng,offsetX:A9.biasX,offsetY:A9.biasY+A9.icon.offsetY,iconHeight:A9.icon.height,iconWidth:A9.icon.width});var A5=A8.windowManager.maxSizeDivisor||1,A7=BA.getNaturalDimensions(),BB=BA.maxWidth||A8.width/A5,BC=BA.maxHeight||A8.height/A5;if(BA.settings.titleVisible){A7.width+=20}if(A7.width>BB){A7.width=BB}if(A7.height>BC){A7.height=BC}BA.setDimensions(A7.width,A7.height)}function A0(A8,BA){var A9=A8.display,A5=BA.getBounds(),BC=A8.windowManager,BB={x1:A9.ulX+(BC.scrollBorderLeft||50),y1:A9.ulY+(BC.scrollBorderTop||50),x2:A9.ulX+A9.width-(BC.scrollBorderRight||50),y2:A9.ulY+A9.height-(BC.scrollBorderBottom||50)},A6=0,A7=0;if(A5.x1<BB.x1){A6=A5.x1-BB.x1}else{if(A5.x2>BB.x2){if(A5.x2-A5.x1>BB.x2-BB.x1){A6=A5.x1-BB.x1}else{A6=A5.x2-BB.x2}}}if(A5.y1<BB.y1){A7=A5.y1-BB.y1}else{if(A5.y2>BB.y2){if(A5.y2-A5.y1>BB.y2-BB.y1){A7=A5.y1-BB.y1}else{A7=A5.y2-BB.y2}}}if(A6||A7){A8.slideMapToPoint(A9.width/2+A6,A9.height/2+A7)}}A1.extend(A1.WindowManager.prototype,{autoPanToView:false,onPoiMouseOver:function(A5,A6){var A7=this;if(A5.infoWindow){return }if(!A5._isRollover){A5._isRollover=0}if(!A6){setTimeout(function(){A5._isRollover-=1;if(A5._isRollover<=0){A7.close("rolloverwindow",A5);A5._isRollover=0;var A9=new A1.Event("MQA.TileMap.closePoiRollover");A1.EventManager.trigger(A5.map,"rolloverclose",A9);var A8=new Az("MQA.Poi.closePoiRollover");A8.srcObject=A5;As(A5,"rolloverclose",A8)}},50)}else{A5._isRollover+=1;if(A5._isRollover==1){if(A5.getInfoContentHTML()||A5.infoTitleHTML||A5.rolloverContent){this.closeAll("rolloverwindow");this.openPoiRollover(A5)}}}},onPoiActivate:function(A5,A7){if(!A5.getInfoContentHTML()&&!A5.infoTitleHTML){return }this.closeAll("rolloverwindow");var A6=A5.infoWindow;if(A6){A6.bringToFront();return }this.openPoiWindow(A5,A7)},openPoiRollover:At(function(A5){if(A5.infoWindow||!A5._isRollover){return }var A7=this,A8=new A1.BasicWindow();A8.settings.titleVisible=false;A8.settings.rollover=true;A5.rolloverWindow=A8;Ax(A8,"onEvent","after",this,"_onRolloverEvent",A5);Aw(A5,A8);A8.setCloseVisible(false);this.open("rolloverwindow",A5,A8);Au(this.map,A5,A8);A8.setVisible(true);var A6=new Az("MQA.Poi.openPoiRollover",A5);As(A5,"rolloveropen",A6);var A9=new A1.Event("MQA.TileMap.openPoiRollover");A9.srcObject=A5;A1.EventManager.trigger(this.map,"rolloveropen",A9)}),_onRolloverEvent:function(A5,A8,A6){var A7=this;switch(A8){case"click":this.onPoiActivate(A5,this.autoPanToView);break;case"mouseover":this.onPoiMouseOver(A5,true);break;case"mouseout":this.onPoiMouseOver(A5,false);break}},openPoiWindow:At(function(A5,A9){if(A5.infoWindow){return }var A8,A6;A8=new A1.BasicWindow();A5.infoWindow=A8;A6=A5.infoWindow.elements.titlebar;if(A5.getTitleVisible&&!A5.getTitleVisible()){A6.parentNode.removeChild(A6)}A2(A5,A8);this.closeAll("infowindow");this.closeAll("rolloverwindow");this.open("infowindow",A5,A8);Au(this.map,A5,A8);A8.setVisible(true);if(A9){A0(this.map,A8)}var A7=new A1.Event("MQA.Poi.infoWindowOpen");A7.srcObject=A5;A1.EventManager.trigger(A5,"infowindowopen",A7);var BA=new A1.Event("MQA.TileMap.infoWindowOpen");BA.srcObject=A5;A1.EventManager.trigger(this.map,"infowindowopen",BA)}),resizePoiWindow:function(A6,A8,A5){var A7=this.find("infowindow",A6);A7.setDimensions(A7.settings.width+A8,A7.settings.height+A5)}});A4(A1.TileMap.prototype,{onZoomStart$After:function(){this.windowManager.closeAll()}});A4(A1.Poi.prototype,{toggleInfoWindow:function(){var A5=this._isRollover>0?true:false;if(A5){this.map.windowManager.close("rolloverwindow",this)}if(!this.infoWindow){this.map.windowManager.openPoiWindow(this,true)}else{this.map.windowManager.close("infowindow",this)}},toggleInfoWindowRollover:function(){if(this.infoWindow){this.map.windowManager.close("infowindow",this)}if(!this._isRollover){this._isRollover=0}var A5=this._isRollover==0?true:false;this.map.windowManager.onPoiMouseOver(this,A5)},dispose$Before:function(){if(!this.map){return }var A5=this.map.windowManager;A5.close("rolloverwindow",this);A5.close("infowindow",this)},onEvent$After:function(A7,A5){if(!this.getInfoTitleHTML()&&!this.getInfoContentHTML()&&!this.getRolloverContent()){return }if(A7=="click"&&!this.getInfoContentHTML()){return }var A6=this.map.windowManager;switch(A7){case"mouseover":if(this._isMouseOver||this._dragging){return }this._isMouseOver=true;A6.onPoiMouseOver(this,true);break;case"mouseout":if(this._isMouseOver){this._isMouseOver=false;A6.onPoiMouseOver(this,false)}break;case"click":A6.onPoiActivate(this,A6.autoPanToView);break;case"dragstart":A6.close("rolloverwindow",this);A6.close("infowindow",this);break;case"move":A6.close("rolloverwindow",this);if(this.infoWindow){Au(this.map,this,this.infoWindow)}break}},onWindowClose:function(A5){if(A5===this.infoWindow){delete this.infoWindow}if(A5===this.rolloverWindow){delete this.rolloverWindow;this._isRollover=0}}});A1.Loader._moduleLoaded("basicwindowmanager")})()})(MQA);